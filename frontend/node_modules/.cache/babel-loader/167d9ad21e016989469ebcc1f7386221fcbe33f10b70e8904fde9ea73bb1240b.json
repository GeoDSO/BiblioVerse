{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Geo\\\\Desktop\\\\TFG\\\\frontend\\\\src\\\\app.js\",\n  _s = $RefreshSig$();\n// ======================= IMPORTS =======================\n// React y useState para manejar estados\nimport React, { useState } from 'react';\n\n// Componentes principales de la aplicaci贸n\nimport Nav from './componentes/nav.js';\nimport HomePage from './componentes/homepage.jsx';\nimport LoginRegister from './componentes/loginregister.jsx';\nimport AnadirLibro from './componentes/a帽adir-libro.jsx';\nimport ExplorarPage from './componentes/explorador.jsx';\nimport Bibliotecas from './componentes/bibliotecas.jsx';\nimport PerfilPage from './componentes/perfilUsuario.jsx';\nimport './app.css';\n\n// =======================================================\n//   COMPONENTE PRINCIPAL DE LA APLICACIN\n// =======================================================\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [isSignUp, setIsSignUp] = useState(false);\n  // vistaActual controla qu茅 pantalla se muestra (login/home/etc)\n  const [vistaActual, setVistaActual] = useState('login');\n\n  // usuario contiene informaci贸n del usuario logueado\n  const [usuario, setUsuario] = useState(null);\n\n  // -------------------------------------------------------\n  //   Cerrar sesi贸n\n  // -------------------------------------------------------\n  const handleLogout = () => {\n    setUsuario(null);\n    setVistaActual('login');\n  };\n\n  // -------------------------------------------------------\n  //   Cambiar de pantalla manualmente\n  // -------------------------------------------------------\n  const handleNavigate = vista => {\n    setVistaActual(vista);\n    if (vista === 'register') {\n      setIsSignUp(true);\n    } else if (vista === 'login') {\n      setIsSignUp(false);\n    } else {\n      setIsSignUp(false);\n    }\n  };\n\n  // -------------------------------------------------------\n  //   LOGIN DE USUARIO\n  // -------------------------------------------------------\n  const handleLogin = async (email, password) => {\n    try {\n      const API_URL = process.env.REACT_APP_API_URL;\n      const response = await fetch(`${API_URL}/api/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      const data = await response.json();\n      console.log(\" Respuesta del login:\", data);\n      console.log(\" Usuario guardado:\", data.usuario);\n      if (response.ok) {\n        // Guardamos usuario y pasamos a la pantalla HOME\n        setUsuario(data.usuario);\n        setVistaActual('home');\n        alert('Login exitoso');\n      } else {\n        alert('Error en el login');\n      }\n    } catch (error) {\n      console.error('Error en la solicitud:', error);\n      alert('Error de conexi贸n con el servidor');\n    }\n  };\n\n  // -------------------------------------------------------\n  //   REGISTRO DE USUARIO\n  // -------------------------------------------------------\n  const handleRegister = async (email, username, password) => {\n    try {\n      const API_URL = process.env.REACT_APP_API_URL;\n      const response = await fetch(`${API_URL}/api/auth/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          username,\n          password\n        })\n      });\n      if (response.ok) {\n        alert('隆Registro exitoso! Ahora puedes iniciar sesi贸n');\n      } else {\n        alert('Error al registrarse');\n      }\n    } catch (error) {\n      alert('Error al conectar con el servidor');\n    }\n  };\n\n  // =======================================================\n  //   RENDER DE LA APLICACIN\n  // =======================================================\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `App ${isSignUp ? \"night\" : \"day\"}`,\n    children: [/*#__PURE__*/_jsxDEV(Nav, {\n      usuario: usuario,\n      onLogout: handleLogout,\n      onNavigate: handleNavigate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: `main ${vistaActual === 'login' || vistaActual === 'register' ? 'modo-login' : ''}`,\n      children: [(vistaActual === 'login' || vistaActual === 'register') && /*#__PURE__*/_jsxDEV(LoginRegister, {\n        onLogin: handleLogin,\n        onRegister: handleRegister,\n        setIsSignUp: setIsSignUp,\n        isSignUpGlobal: isSignUp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this), vistaActual === 'home' && /*#__PURE__*/_jsxDEV(HomePage, {\n        usuario: usuario\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, this), vistaActual === 'bibliotecas' && usuario && /*#__PURE__*/_jsxDEV(Bibliotecas, {\n        usuario: usuario\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this), vistaActual === 'a帽adir-libro' && usuario && /*#__PURE__*/_jsxDEV(AnadirLibro, {\n        usuario: usuario\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this), vistaActual === 'explorador' && usuario && /*#__PURE__*/_jsxDEV(ExplorarPage, {\n        usuario: usuario\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 3\n      }, this), vistaActual === 'perfilpage' && usuario && /*#__PURE__*/_jsxDEV(PerfilPage, {\n        usuario: usuario\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 15\n      }, this) // <<< AADE ESTO\n      ]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"SZQmuD/hzHN6b/NLTcA3J3e6uQY=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","Nav","HomePage","LoginRegister","AnadirLibro","ExplorarPage","Bibliotecas","PerfilPage","jsxDEV","_jsxDEV","App","_s","isSignUp","setIsSignUp","vistaActual","setVistaActual","usuario","setUsuario","handleLogout","handleNavigate","vista","handleLogin","email","password","API_URL","process","env","REACT_APP_API_URL","response","fetch","method","headers","body","JSON","stringify","data","json","console","log","ok","alert","error","handleRegister","username","className","children","onLogout","onNavigate","fileName","_jsxFileName","lineNumber","columnNumber","onLogin","onRegister","isSignUpGlobal","_c","$RefreshReg$"],"sources":["C:/Users/Geo/Desktop/TFG/frontend/src/app.js"],"sourcesContent":["// ======================= IMPORTS =======================\r\n// React y useState para manejar estados\r\nimport React, { useState } from 'react';\r\n\r\n// Componentes principales de la aplicaci贸n\r\nimport Nav from './componentes/nav.js';\r\nimport HomePage from './componentes/homepage.jsx';\r\nimport LoginRegister from './componentes/loginregister.jsx';\r\nimport AnadirLibro from './componentes/a帽adir-libro.jsx';\r\nimport ExplorarPage from './componentes/explorador.jsx';\r\nimport Bibliotecas from './componentes/bibliotecas.jsx';\r\nimport PerfilPage from './componentes/perfilUsuario.jsx';\r\n\r\nimport './app.css';\r\n\r\n// =======================================================\r\n//   COMPONENTE PRINCIPAL DE LA APLICACIN\r\n// =======================================================\r\n\r\nfunction App() {\r\n\r\n\r\n  \r\n\r\n    const [isSignUp, setIsSignUp] = useState(false);\r\n  // vistaActual controla qu茅 pantalla se muestra (login/home/etc)\r\n  const [vistaActual, setVistaActual] = useState('login');\r\n\r\n  // usuario contiene informaci贸n del usuario logueado\r\n  const [usuario, setUsuario] = useState(null);\r\n\r\n\r\n  \r\n  // -------------------------------------------------------\r\n  //   Cerrar sesi贸n\r\n  // -------------------------------------------------------\r\n  const handleLogout = () => {\r\n    setUsuario(null);\r\n    setVistaActual('login');\r\n  };\r\n\r\n  // -------------------------------------------------------\r\n  //   Cambiar de pantalla manualmente\r\n  // -------------------------------------------------------\r\n  const handleNavigate = (vista) => {\r\n    setVistaActual(vista);\r\n    if(vista === 'register'){\r\n      setIsSignUp(true);\r\n    }else if (vista === 'login'){\r\n      setIsSignUp(false);\r\n    }else{\r\n      setIsSignUp(false)\r\n    }\r\n  };\r\n\r\n  // -------------------------------------------------------\r\n  //   LOGIN DE USUARIO\r\n  // -------------------------------------------------------\r\n  const handleLogin = async (email, password) => {\r\n    try {\r\n      const API_URL = process.env.REACT_APP_API_URL;\r\n\r\n      const response = await fetch(`${API_URL}/api/auth/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      console.log(\" Respuesta del login:\", data);  \r\n      console.log(\" Usuario guardado:\", data.usuario);  \r\n\r\n      if (response.ok) {\r\n        // Guardamos usuario y pasamos a la pantalla HOME\r\n        setUsuario(data.usuario);\r\n        setVistaActual('home');\r\n        alert('Login exitoso');\r\n      } else {\r\n        alert('Error en el login');\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error en la solicitud:', error);\r\n      alert('Error de conexi贸n con el servidor');\r\n    }\r\n  };\r\n\r\n  // -------------------------------------------------------\r\n  //   REGISTRO DE USUARIO\r\n  // -------------------------------------------------------\r\n  const handleRegister = async (email, username, password) => {\r\n    try {\r\n      const API_URL = process.env.REACT_APP_API_URL;\r\n\r\n      const response = await fetch(`${API_URL}/api/auth/register`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, username, password }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        alert('隆Registro exitoso! Ahora puedes iniciar sesi贸n');\r\n      } else {\r\n        alert('Error al registrarse');\r\n      }\r\n\r\n    } catch (error) {\r\n      alert('Error al conectar con el servidor');\r\n    }\r\n  };\r\n\r\n  // =======================================================\r\n  //   RENDER DE LA APLICACIN\r\n  // =======================================================\r\n  return (\r\n    <div className={`App ${isSignUp ? \"night\" : \"day\"}`}>\r\n\r\n      <Nav\r\n        usuario={usuario}\r\n        onLogout={handleLogout}\r\n        onNavigate={handleNavigate}\r\n      />\r\n\r\n      {/* Contenedor principal */}\r\n      <main className={`main ${vistaActual === 'login'|| vistaActual === 'register' ? 'modo-login' : ''}`}>\r\n\r\n        {/* Pantalla LOGIN / REGISTRO */}\r\n        {(vistaActual === 'login' || vistaActual === 'register') && (\r\n          <LoginRegister\r\n            onLogin={handleLogin}\r\n            onRegister={handleRegister}\r\n            setIsSignUp={setIsSignUp}\r\n            isSignUpGlobal={isSignUp}\r\n          />\r\n        )}\r\n\r\n        {/* Pantalla HOME */}\r\n        {vistaActual === 'home' && (\r\n          <HomePage usuario={usuario} />\r\n        )}\r\n\r\n        {/* Lista de Bibliotecas */}\r\n        {vistaActual === 'bibliotecas' && usuario && (\r\n          <Bibliotecas usuario={usuario} />\r\n    )}\r\n\r\n        {/* A帽adir libro */}\r\n        {vistaActual === 'a帽adir-libro' && usuario && (\r\n          <AnadirLibro usuario={usuario} />\r\n        )}\r\n\r\n        {vistaActual === 'explorador' && usuario && (\r\n  <ExplorarPage usuario={usuario} />\r\n)}\r\n\r\n    {vistaActual === 'perfilpage' && usuario && ( \r\n         <PerfilPage usuario={usuario} /> // <<< AADE ESTO\r\n        )}\r\n\r\n      </main>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}