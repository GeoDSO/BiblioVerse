{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Geo\\\\Desktop\\\\TFG\\\\frontend\\\\src\\\\componentes\\\\perfilUsuario.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport './perfilusuario.css';\nimport LectorLibro from './lectorlibro';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8081';\nconst VISTA_TIPOS = {\n  MIS_LIBROS: 'Mis Libros',\n  MIS_BIBLIOTECAS: 'Mis Bibliotecas',\n  SEGUIDOS: 'Seguidos'\n};\nfunction PerfilPage({\n  usuario\n}) {\n  _s();\n  var _bibliotecaExpandida$, _bibliotecaExpandida$2;\n  const [bibliotecas, setBibliotecas] = useState([]);\n  const [bibliotecasSeguidas, setBibliotecasSeguidas] = useState([]);\n  const [bibliotecaExpandida, setBibliotecaExpandida] = useState(null);\n  const [libroAbierto, setLibroAbierto] = useState(null);\n  const [mostrarModalCrear, setMostrarModalCrear] = useState(false);\n  const [formData, setFormData] = useState({\n    nombre: '',\n    descripcion: '',\n    esPublica: false\n  });\n  const [mensaje, setMensaje] = useState('');\n  const [cargando, setCargando] = useState(false);\n  const [vistaActiva, setVistaActiva] = useState(VISTA_TIPOS.MIS_BIBLIOTECAS);\n  useEffect(() => {\n    if (usuario && usuario.id) {\n      cargarBibliotecas();\n      cargarBibliotecasSeguidas();\n    }\n  }, [usuario]);\n  const obtenerColorLibro = libroId => {\n    const colores = 8;\n    return `color-${libroId % colores + 1}`;\n  };\n  const cargarBibliotecas = async () => {\n    if (!usuario || !usuario.id) return;\n    try {\n      const response = await fetch(`${API_URL}/api/bibliotecas/listar`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        setBibliotecas(data);\n      } else {\n        setBibliotecas([]);\n      }\n    } catch (error) {\n      console.error('âŒ Error al cargar bibliotecas:', error);\n      setBibliotecas([]);\n    }\n  };\n  const cargarBibliotecasSeguidas = async () => {\n    if (!usuario || !usuario.id) return;\n    try {\n      const response = await fetch(`${API_URL}/api/bibliotecas/listar`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        // Filtrar bibliotecas donde el usuario actual estÃ¡ en la lista de seguidores\n        const seguidas = data.filter(b => b.seguidores && b.seguidores.some(seg => seg.id === usuario.id) && b.creador.id !== usuario.id);\n        setBibliotecasSeguidas(seguidas);\n      }\n    } catch (error) {\n      console.error('âŒ Error al cargar bibliotecas seguidas:', error);\n      setBibliotecasSeguidas([]);\n    }\n  };\n  const contenidoFiltrado = useMemo(() => {\n    if (!usuario || !usuario.id) return {\n      tipo: vistaActiva,\n      contenido: []\n    };\n    const misBibliotecas = bibliotecas.filter(b => b.creador && b.creador.id === usuario.id);\n    switch (vistaActiva) {\n      case VISTA_TIPOS.MIS_LIBROS:\n        return {\n          tipo: VISTA_TIPOS.MIS_LIBROS,\n          mensaje: \"Funcionalidad de Mis Libros (requiere listar libros individualmente).\",\n          contenido: []\n        };\n      case VISTA_TIPOS.MIS_BIBLIOTECAS:\n        return {\n          tipo: VISTA_TIPOS.MIS_BIBLIOTECAS,\n          contenido: misBibliotecas\n        };\n      case VISTA_TIPOS.SEGUIDOS:\n        return {\n          tipo: VISTA_TIPOS.SEGUIDOS,\n          contenido: bibliotecasSeguidas\n        };\n      default:\n        return {\n          tipo: vistaActiva,\n          contenido: []\n        };\n    }\n  }, [bibliotecas, bibliotecasSeguidas, vistaActiva, usuario]);\n  const expandirBiblioteca = biblioteca => {\n    setBibliotecaExpandida(biblioteca);\n  };\n  const cerrarExpandida = () => {\n    setBibliotecaExpandida(null);\n  };\n  const abrirLibro = (libro, e) => {\n    e.stopPropagation();\n    setLibroAbierto(libro);\n  };\n  const cerrarLibro = () => {\n    setLibroAbierto(null);\n  };\n  const abrirModalCrear = () => {\n    setMostrarModalCrear(true);\n    setFormData({\n      nombre: '',\n      descripcion: '',\n      esPublica: false\n    });\n    setMensaje('');\n  };\n  const cerrarModalCrear = () => {\n    setMostrarModalCrear(false);\n    setFormData({\n      nombre: '',\n      descripcion: '',\n      esPublica: false\n    });\n    setMensaje('');\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    setMensaje('');\n  };\n  const handleVisibilidadChange = esPublica => {\n    setFormData(prev => ({\n      ...prev,\n      esPublica\n    }));\n  };\n  const crearBiblioteca = async () => {\n    if (!formData.nombre.trim()) {\n      setMensaje('âŒ El nombre es obligatorio');\n      return;\n    }\n    if (!usuario || !usuario.id) {\n      setMensaje('âŒ Error: El ID del usuario no estÃ¡ disponible.');\n      return;\n    }\n    setCargando(true);\n    try {\n      const datosEnviar = {\n        nombre: formData.nombre,\n        descripcion: formData.descripcion || \"\",\n        esPublica: formData.esPublica,\n        idUsuario: usuario.id\n      };\n      const response = await fetch(`${API_URL}/api/bibliotecas/crear`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(datosEnviar)\n      });\n      if (response.ok) {\n        setMensaje('âœ… Â¡Biblioteca creada exitosamente!');\n        setTimeout(() => {\n          cerrarModalCrear();\n          cargarBibliotecas();\n        }, 1500);\n      } else {\n        const error = await response.text();\n        setMensaje(`âŒ Error al crear: ${error}`);\n      }\n    } catch (error) {\n      console.error('Error de conexiÃ³n o fetch:', error);\n      setMensaje('âŒ Error de red o conexiÃ³n al servidor.');\n    } finally {\n      setCargando(false);\n    }\n  };\n  const eliminarBiblioteca = async id => {\n    if (!window.confirm('Â¿EstÃ¡s seguro de eliminar esta biblioteca? Los libros no se eliminarÃ¡n.')) {\n      return;\n    }\n    try {\n      const response = await fetch(`${API_URL}/api/bibliotecas/eliminar/${id}`, {\n        method: 'DELETE'\n      });\n      if (response.ok) {\n        alert('âœ… Biblioteca eliminada');\n        cargarBibliotecas();\n        cerrarExpandida();\n      } else {\n        alert('âŒ Error al eliminar la biblioteca');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('âŒ Error de conexiÃ³n');\n    }\n  };\n  const eliminarLibroDeBiblioteca = async (idBiblioteca, idLibro, e) => {\n    e.stopPropagation();\n    if (!window.confirm('Â¿Quieres eliminar este libro de la biblioteca?')) {\n      return;\n    }\n    try {\n      const response = await fetch(`${API_URL}/api/bibliotecas/${idBiblioteca}/eliminar-libro/${idLibro}`, {\n        method: 'DELETE'\n      });\n      if (response.ok) {\n        alert('âœ… Libro eliminado de la biblioteca');\n        const bibliotecaActualizada = {\n          ...bibliotecaExpandida,\n          libros: bibliotecaExpandida.libros.filter(libro => libro.id !== idLibro)\n        };\n        setBibliotecaExpandida(bibliotecaActualizada);\n        cargarBibliotecas();\n      } else {\n        alert('âŒ Error al eliminar el libro');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('âŒ Error de conexiÃ³n');\n    }\n  };\n  const dejarDeSeguirBiblioteca = async (bibliotecaId, e) => {\n    e.stopPropagation();\n    if (!window.confirm('Â¿Dejar de seguir esta biblioteca?')) {\n      return;\n    }\n    try {\n      const response = await fetch(`${API_URL}/api/usuarios/${usuario.id}/dejar-de-seguir-biblioteca/${bibliotecaId}`, {\n        method: 'DELETE'\n      });\n      if (response.ok) {\n        alert('âœ… Has dejado de seguir esta biblioteca');\n        cargarBibliotecasSeguidas();\n        cerrarExpandida();\n      } else {\n        alert('âŒ Error al dejar de seguir');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('âŒ Error de conexiÃ³n');\n    }\n  };\n  const handleImageError = (e, libroId) => {\n    e.target.style.display = 'none';\n    const placeholder = e.target.nextSibling;\n    if (placeholder) {\n      placeholder.classList.add('visible');\n    }\n  };\n  if (!usuario) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"perfil-wrapper\",\n      children: \"No hay informaci\\xF3n de usuario disponible.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"perfil-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"perfil-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"perfil-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"titulo\",\n          children: [\"\\uD83D\\uDC64 Perfil de \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"highlight\",\n            children: [\"@\", usuario.username]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 57\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"subtitulo\",\n          children: \"Informaci\\xF3n personal y tus recursos guardados.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"perfil-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"avatar-placeholder\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"avatar-inicial\",\n            children: usuario.username ? usuario.username[0].toUpperCase() : \"U\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"nombre-usuario\",\n          children: [\"@\", usuario.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"correo-usuario\",\n          children: usuario.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"perfil-stats\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-numero\",\n              children: contenidoFiltrado.tipo === VISTA_TIPOS.MIS_BIBLIOTECAS ? contenidoFiltrado.contenido.length : bibliotecas.filter(b => b.creador && b.creador.id === usuario.id).length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Bibliotecas\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-numero\",\n              children: bibliotecasSeguidas.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Siguiendo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"perfil-filtro-nav\",\n        children: Object.values(VISTA_TIPOS).map(tipo => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `filtro-btn ${vistaActiva === tipo ? 'activo' : ''}`,\n          onClick: () => setVistaActiva(tipo),\n          children: tipo\n        }, tipo, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"bibliotecas-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bibliotecas-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"bibliotecas-titulo\",\n            children: vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS ? 'ðŸ“š Mis Bibliotecas' : vistaActiva === VISTA_TIPOS.MIS_LIBROS ? 'ðŸ“– Mis Libros' : 'ðŸ‘¥ Bibliotecas que Sigo'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 25\n          }, this), vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-nueva-biblioteca-header\",\n            onClick: abrirModalCrear,\n            children: \"\\u2795 Nueva Biblioteca\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 21\n        }, this), contenidoFiltrado.tipo === VISTA_TIPOS.MIS_LIBROS ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mensaje-info\",\n          children: contenidoFiltrado.mensaje\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 25\n        }, this) : contenidoFiltrado.contenido.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mensaje-info\",\n          children: vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS ? 'AÃºn no tienes bibliotecas creadas. Â¡Crea tu primera biblioteca!' : 'No sigues ninguna biblioteca todavÃ­a. Explora bibliotecas pÃºblicas para seguirlas.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bibliotecas-container\",\n          children: contenidoFiltrado.contenido.map(biblioteca => {\n            var _biblioteca$libros;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"biblioteca-card\",\n              onClick: () => expandirBiblioteca(biblioteca),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"biblioteca-header-card\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"icono\",\n                  children: biblioteca.esPublica ? 'ðŸŒ' : 'ðŸ”’'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"biblioteca-nombre\",\n                  children: biblioteca.nombre\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"biblioteca-descripcion\",\n                children: biblioteca.descripcion || 'Sin descripciÃ³n'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mini-estanteria\",\n                children: biblioteca.libros && biblioteca.libros.length > 0 ? biblioteca.libros.slice(0, 6).map(libro => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"libro-mini-wrapper\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: `${API_URL}/api/libros/portada/${libro.id}`,\n                    alt: libro.titulo,\n                    className: \"mini-portada\",\n                    onError: e => handleImageError(e, libro.id)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 356,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `libro-placeholder ${obtenerColorLibro(libro.id)}`,\n                    children: \"\\uD83D\\uDCD6\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 362,\n                    columnNumber: 53\n                  }, this)]\n                }, libro.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 49\n                }, this)) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"sin-libros-mini\",\n                  children: \"Sin libros a\\xFAn\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"biblioteca-footer\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: biblioteca.esPublica ? \"badge-publica\" : \"badge-privada\",\n                  children: biblioteca.esPublica ? 'PÃºblica' : 'Privada'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"cantidad\",\n                  children: [\"\\uD83D\\uDCD6 \", ((_biblioteca$libros = biblioteca.libros) === null || _biblioteca$libros === void 0 ? void 0 : _biblioteca$libros.length) || 0]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 37\n              }, this)]\n            }, biblioteca.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 33\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }, this), mostrarModalCrear && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-crear-biblioteca\",\n      onClick: cerrarModalCrear,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-crear-contenido\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD83D\\uDCDA Crear Nueva Biblioteca\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 25\n        }, this), mensaje && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: mensaje.includes('âœ…') ? 'mensaje-exito' : 'mensaje-error',\n          children: mensaje\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 38\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Nombre *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 53\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"nombre\",\n            value: formData.nombre,\n            onChange: handleInputChange,\n            placeholder: \"Mi Biblioteca de...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 76\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Descripci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 53\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"descripcion\",\n            value: formData.descripcion,\n            onChange: handleInputChange,\n            placeholder: \"Describe tu biblioteca...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 79\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Visibilidad\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"visibilidad-opciones\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `opcion-visibilidad ${!formData.esPublica ? 'activa' : ''}`,\n              onClick: () => handleVisibilidadChange(false),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"icono-opcion\",\n                children: \"\\uD83D\\uDD12\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Privada\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 75\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Solo t\\xFA puedes verla\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 91\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `opcion-visibilidad ${formData.esPublica ? 'activa' : ''}`,\n              onClick: () => handleVisibilidadChange(true),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"icono-opcion\",\n                children: \"\\uD83C\\uDF0D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"P\\xFAblica\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 75\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Visible en el explorador\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 91\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-botones\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-modal btn-cancelar\",\n            onClick: cerrarModalCrear,\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-modal btn-crear\",\n            onClick: crearBiblioteca,\n            disabled: cargando,\n            children: cargando ? 'Creando...' : 'Crear Biblioteca'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 17\n    }, this), bibliotecaExpandida && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"biblioteca-expandida\",\n      onClick: cerrarExpandida,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"biblioteca-expandida-contenido\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"biblioteca-expandida-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: bibliotecaExpandida.esPublica ? 'ðŸŒ' : 'ðŸ”’'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 33\n            }, this), bibliotecaExpandida.nombre]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-cerrar\",\n            onClick: cerrarExpandida,\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"biblioteca-expandida-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"biblioteca-expandida-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Descripci\\xF3n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 36\n              }, this), \" \", bibliotecaExpandida.descripcion || 'Sin descripciÃ³n']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Creador:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 36\n              }, this), \" @\", (_bibliotecaExpandida$ = bibliotecaExpandida.creador) === null || _bibliotecaExpandida$ === void 0 ? void 0 : _bibliotecaExpandida$.username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Visibilidad:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: bibliotecaExpandida.esPublica ? \"badge-publica\" : \"badge-privada\",\n                style: {\n                  marginLeft: '0.5rem'\n                },\n                children: bibliotecaExpandida.esPublica ? 'PÃºblica' : 'Privada'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Total de libros:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 36\n              }, this), \" \", ((_bibliotecaExpandida$2 = bibliotecaExpandida.libros) === null || _bibliotecaExpandida$2 === void 0 ? void 0 : _bibliotecaExpandida$2.length) || 0]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 33\n            }, this), vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-eliminar\",\n              onClick: () => eliminarBiblioteca(bibliotecaExpandida.id),\n              children: \"\\uD83D\\uDDD1\\uFE0F Eliminar Biblioteca\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 37\n            }, this), vistaActiva === VISTA_TIPOS.SEGUIDOS && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-dejar-seguir\",\n              onClick: e => dejarDeSeguirBiblioteca(bibliotecaExpandida.id, e),\n              children: \"\\uD83D\\uDC94 Dejar de Seguir\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"estanteria-grande\",\n            children: bibliotecaExpandida.libros && bibliotecaExpandida.libros.length > 0 ? bibliotecaExpandida.libros.map(libro => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"libro-grande\",\n              onClick: e => abrirLibro(libro, e),\n              children: [vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-eliminar-libro\",\n                onClick: e => eliminarLibroDeBiblioteca(bibliotecaExpandida.id, libro.id, e),\n                title: \"Eliminar de la biblioteca\",\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"libro-grande-portada-wrapper\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `${API_URL}/api/libros/portada/${libro.id}`,\n                  alt: libro.titulo,\n                  onError: e => handleImageError(e, libro.id)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `libro-placeholder-grande ${obtenerColorLibro(libro.id)}`,\n                  children: \"\\uD83D\\uDCDA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"libro-grande-titulo\",\n                children: libro.titulo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 45\n              }, this)]\n            }, libro.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 41\n            }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sin-libros-grande\",\n              children: \"\\uD83D\\uDCDA Esta biblioteca a\\xFAn no tiene libros\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 17\n    }, this), libroAbierto && /*#__PURE__*/_jsxDEV(LectorLibro, {\n      url: `${API_URL}/api/libros/pdf/${libroAbierto.id}`,\n      onClose: cerrarLibro\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 9\n  }, this);\n}\n_s(PerfilPage, \"xQbBHaVbEnii0ozSgM3KGuRC1TM=\");\n_c = PerfilPage;\nexport default PerfilPage;\nvar _c;\n$RefreshReg$(_c, \"PerfilPage\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","LectorLibro","jsxDEV","_jsxDEV","API_URL","process","env","REACT_APP_API_URL","VISTA_TIPOS","MIS_LIBROS","MIS_BIBLIOTECAS","SEGUIDOS","PerfilPage","usuario","_s","_bibliotecaExpandida$","_bibliotecaExpandida$2","bibliotecas","setBibliotecas","bibliotecasSeguidas","setBibliotecasSeguidas","bibliotecaExpandida","setBibliotecaExpandida","libroAbierto","setLibroAbierto","mostrarModalCrear","setMostrarModalCrear","formData","setFormData","nombre","descripcion","esPublica","mensaje","setMensaje","cargando","setCargando","vistaActiva","setVistaActiva","id","cargarBibliotecas","cargarBibliotecasSeguidas","obtenerColorLibro","libroId","colores","response","fetch","ok","Error","status","data","json","Array","isArray","error","console","seguidas","filter","b","seguidores","some","seg","creador","contenidoFiltrado","tipo","contenido","misBibliotecas","expandirBiblioteca","biblioteca","cerrarExpandida","abrirLibro","libro","e","stopPropagation","cerrarLibro","abrirModalCrear","cerrarModalCrear","handleInputChange","name","value","target","prev","handleVisibilidadChange","crearBiblioteca","trim","datosEnviar","idUsuario","method","headers","body","JSON","stringify","setTimeout","text","eliminarBiblioteca","window","confirm","alert","eliminarLibroDeBiblioteca","idBiblioteca","idLibro","bibliotecaActualizada","libros","dejarDeSeguirBiblioteca","bibliotecaId","handleImageError","style","display","placeholder","nextSibling","classList","add","className","children","fileName","_jsxFileName","lineNumber","columnNumber","username","toUpperCase","email","length","Object","values","map","onClick","_biblioteca$libros","slice","src","alt","titulo","onError","includes","type","onChange","disabled","marginLeft","title","url","onClose","_c","$RefreshReg$"],"sources":["C:/Users/Geo/Desktop/TFG/frontend/src/componentes/perfilUsuario.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport './perfilusuario.css';\r\nimport LectorLibro from './lectorlibro'; \r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8081';\r\n\r\nconst VISTA_TIPOS = {\r\n    MIS_LIBROS: 'Mis Libros',\r\n    MIS_BIBLIOTECAS: 'Mis Bibliotecas',\r\n    SEGUIDOS: 'Seguidos'\r\n};\r\n\r\nfunction PerfilPage({ usuario }) {\r\n    const [bibliotecas, setBibliotecas] = useState([]);\r\n    const [bibliotecasSeguidas, setBibliotecasSeguidas] = useState([]);\r\n    const [bibliotecaExpandida, setBibliotecaExpandida] = useState(null);\r\n    const [libroAbierto, setLibroAbierto] = useState(null);\r\n    const [mostrarModalCrear, setMostrarModalCrear] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        nombre: '',\r\n        descripcion: '',\r\n        esPublica: false\r\n    });\r\n    const [mensaje, setMensaje] = useState('');\r\n    const [cargando, setCargando] = useState(false);\r\n    const [vistaActiva, setVistaActiva] = useState(VISTA_TIPOS.MIS_BIBLIOTECAS);\r\n\r\n    useEffect(() => {\r\n        if (usuario && usuario.id) {\r\n            cargarBibliotecas();\r\n            cargarBibliotecasSeguidas();\r\n        }\r\n    }, [usuario]);\r\n\r\n    const obtenerColorLibro = (libroId) => {\r\n        const colores = 8;\r\n        return `color-${(libroId % colores) + 1}`;\r\n    };\r\n\r\n    const cargarBibliotecas = async () => {\r\n        if (!usuario || !usuario.id) return;\r\n        \r\n        try {\r\n            const response = await fetch(`${API_URL}/api/bibliotecas/listar`);\r\n            \r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n            \r\n            const data = await response.json();\r\n            \r\n            if (Array.isArray(data)) {\r\n                setBibliotecas(data);\r\n            } else {\r\n                setBibliotecas([]);\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.error('âŒ Error al cargar bibliotecas:', error);\r\n            setBibliotecas([]);\r\n        }\r\n    };\r\n\r\n    const cargarBibliotecasSeguidas = async () => {\r\n        if (!usuario || !usuario.id) return;\r\n        \r\n        try {\r\n            const response = await fetch(`${API_URL}/api/bibliotecas/listar`);\r\n            \r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n            \r\n            const data = await response.json();\r\n            \r\n            if (Array.isArray(data)) {\r\n                // Filtrar bibliotecas donde el usuario actual estÃ¡ en la lista de seguidores\r\n                const seguidas = data.filter(b => \r\n                    b.seguidores && b.seguidores.some(seg => seg.id === usuario.id) && b.creador.id !== usuario.id\r\n                );\r\n                setBibliotecasSeguidas(seguidas);\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.error('âŒ Error al cargar bibliotecas seguidas:', error);\r\n            setBibliotecasSeguidas([]);\r\n        }\r\n    };\r\n    \r\n    const contenidoFiltrado = useMemo(() => {\r\n        if (!usuario || !usuario.id) return { tipo: vistaActiva, contenido: [] };\r\n\r\n        const misBibliotecas = bibliotecas.filter(b => b.creador && b.creador.id === usuario.id);\r\n        \r\n        switch (vistaActiva) {\r\n            case VISTA_TIPOS.MIS_LIBROS:\r\n                return {\r\n                    tipo: VISTA_TIPOS.MIS_LIBROS,\r\n                    mensaje: \"Funcionalidad de Mis Libros (requiere listar libros individualmente).\",\r\n                    contenido: []\r\n                };\r\n            case VISTA_TIPOS.MIS_BIBLIOTECAS:\r\n                return {\r\n                    tipo: VISTA_TIPOS.MIS_BIBLIOTECAS,\r\n                    contenido: misBibliotecas\r\n                };\r\n            case VISTA_TIPOS.SEGUIDOS:\r\n                return {\r\n                    tipo: VISTA_TIPOS.SEGUIDOS,\r\n                    contenido: bibliotecasSeguidas\r\n                };\r\n            default:\r\n                return { tipo: vistaActiva, contenido: [] };\r\n        }\r\n    }, [bibliotecas, bibliotecasSeguidas, vistaActiva, usuario]);\r\n\r\n    const expandirBiblioteca = (biblioteca) => { setBibliotecaExpandida(biblioteca); };\r\n    const cerrarExpandida = () => { setBibliotecaExpandida(null); };\r\n    const abrirLibro = (libro, e) => { e.stopPropagation(); setLibroAbierto(libro); };\r\n    const cerrarLibro = () => { setLibroAbierto(null); };\r\n    \r\n    const abrirModalCrear = () => { setMostrarModalCrear(true); setFormData({ nombre: '', descripcion: '', esPublica: false }); setMensaje(''); };\r\n    const cerrarModalCrear = () => { setMostrarModalCrear(false); setFormData({ nombre: '', descripcion: '', esPublica: false }); setMensaje(''); };\r\n    const handleInputChange = (e) => { const { name, value } = e.target; setFormData(prev => ({ ...prev, [name]: value })); setMensaje(''); };\r\n    const handleVisibilidadChange = (esPublica) => { setFormData(prev => ({ ...prev, esPublica })); };\r\n    \r\n    const crearBiblioteca = async () => { \r\n        if (!formData.nombre.trim()) {\r\n            setMensaje('âŒ El nombre es obligatorio');\r\n            return;\r\n        }\r\n\r\n        if (!usuario || !usuario.id) {\r\n            setMensaje('âŒ Error: El ID del usuario no estÃ¡ disponible.');\r\n            return;\r\n        }\r\n\r\n        setCargando(true);\r\n        try {\r\n            const datosEnviar = {\r\n                nombre: formData.nombre,\r\n                descripcion: formData.descripcion || \"\",\r\n                esPublica: formData.esPublica,\r\n                idUsuario: usuario.id\r\n            };\r\n\r\n            const response = await fetch(`${API_URL}/api/bibliotecas/crear`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(datosEnviar)\r\n            });\r\n\r\n            if (response.ok) {\r\n                setMensaje('âœ… Â¡Biblioteca creada exitosamente!');\r\n                setTimeout(() => {\r\n                    cerrarModalCrear();\r\n                    cargarBibliotecas();\r\n                }, 1500);\r\n            } else {\r\n                const error = await response.text();\r\n                setMensaje(`âŒ Error al crear: ${error}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error de conexiÃ³n o fetch:', error);\r\n            setMensaje('âŒ Error de red o conexiÃ³n al servidor.');\r\n        } finally {\r\n            setCargando(false);\r\n        }\r\n    };\r\n    \r\n    const eliminarBiblioteca = async (id) => {\r\n        if (!window.confirm('Â¿EstÃ¡s seguro de eliminar esta biblioteca? Los libros no se eliminarÃ¡n.')) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/api/bibliotecas/eliminar/${id}`, {\r\n                method: 'DELETE'\r\n            });\r\n\r\n            if (response.ok) {\r\n                alert('âœ… Biblioteca eliminada');\r\n                cargarBibliotecas();\r\n                cerrarExpandida();\r\n            } else {\r\n                alert('âŒ Error al eliminar la biblioteca');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            alert('âŒ Error de conexiÃ³n');\r\n        }\r\n    };\r\n\r\n    const eliminarLibroDeBiblioteca = async (idBiblioteca, idLibro, e) => {\r\n        e.stopPropagation();\r\n        \r\n        if (!window.confirm('Â¿Quieres eliminar este libro de la biblioteca?')) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(\r\n                `${API_URL}/api/bibliotecas/${idBiblioteca}/eliminar-libro/${idLibro}`,\r\n                { method: 'DELETE' }\r\n            );\r\n\r\n            if (response.ok) {\r\n                alert('âœ… Libro eliminado de la biblioteca');\r\n                \r\n                const bibliotecaActualizada = {\r\n                    ...bibliotecaExpandida,\r\n                    libros: bibliotecaExpandida.libros.filter(libro => libro.id !== idLibro)\r\n                };\r\n                setBibliotecaExpandida(bibliotecaActualizada);\r\n                \r\n                cargarBibliotecas();\r\n            } else {\r\n                alert('âŒ Error al eliminar el libro');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            alert('âŒ Error de conexiÃ³n');\r\n        }\r\n    };\r\n\r\n    const dejarDeSeguirBiblioteca = async (bibliotecaId, e) => {\r\n        e.stopPropagation();\r\n        \r\n        if (!window.confirm('Â¿Dejar de seguir esta biblioteca?')) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(\r\n                `${API_URL}/api/usuarios/${usuario.id}/dejar-de-seguir-biblioteca/${bibliotecaId}`,\r\n                { method: 'DELETE' }\r\n            );\r\n\r\n            if (response.ok) {\r\n                alert('âœ… Has dejado de seguir esta biblioteca');\r\n                cargarBibliotecasSeguidas();\r\n                cerrarExpandida();\r\n            } else {\r\n                alert('âŒ Error al dejar de seguir');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            alert('âŒ Error de conexiÃ³n');\r\n        }\r\n    };\r\n\r\n    const handleImageError = (e, libroId) => {\r\n        e.target.style.display = 'none';\r\n        const placeholder = e.target.nextSibling;\r\n        if (placeholder) {\r\n            placeholder.classList.add('visible');\r\n        }\r\n    };\r\n\r\n    if (!usuario) {\r\n        return <div className=\"perfil-wrapper\">No hay informaciÃ³n de usuario disponible.</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"perfil-wrapper\">\r\n            <div className=\"perfil-container\">\r\n                \r\n                <header className=\"perfil-header\">\r\n                    <h1 className=\"titulo\">ðŸ‘¤ Perfil de <span className=\"highlight\">@{usuario.username}</span></h1>\r\n                    <p className=\"subtitulo\">InformaciÃ³n personal y tus recursos guardados.</p>\r\n                </header>\r\n\r\n                <div className=\"perfil-card\">\r\n                    <div className=\"avatar-placeholder\">\r\n                        <span className=\"avatar-inicial\">\r\n                            {usuario.username ? usuario.username[0].toUpperCase() : \"U\"}\r\n                        </span>\r\n                    </div>\r\n                    <h2 className=\"nombre-usuario\">@{usuario.username}</h2>\r\n                    <p className=\"correo-usuario\">{usuario.email}</p>\r\n                    \r\n                    <div className=\"perfil-stats\">\r\n                        <div className=\"stat-item\">\r\n                            <span className=\"stat-numero\">{contenidoFiltrado.tipo === VISTA_TIPOS.MIS_BIBLIOTECAS ? contenidoFiltrado.contenido.length : bibliotecas.filter(b => b.creador && b.creador.id === usuario.id).length}</span>\r\n                            <span className=\"stat-label\">Bibliotecas</span>\r\n                        </div>\r\n                        <div className=\"stat-item\">\r\n                            <span className=\"stat-numero\">{bibliotecasSeguidas.length}</span>\r\n                            <span className=\"stat-label\">Siguiendo</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                <nav className=\"perfil-filtro-nav\">\r\n                    {Object.values(VISTA_TIPOS).map(tipo => (\r\n                        <button\r\n                            key={tipo}\r\n                            className={`filtro-btn ${vistaActiva === tipo ? 'activo' : ''}`}\r\n                            onClick={() => setVistaActiva(tipo)}\r\n                        >\r\n                            {tipo}\r\n                        </button>\r\n                    ))}\r\n                </nav>\r\n\r\n                <section className=\"bibliotecas-section\">\r\n                    \r\n                    <div className=\"bibliotecas-header\">\r\n                        <h2 className=\"bibliotecas-titulo\">\r\n                            {vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS ? 'ðŸ“š Mis Bibliotecas' : \r\n                             vistaActiva === VISTA_TIPOS.MIS_LIBROS ? 'ðŸ“– Mis Libros' :\r\n                             'ðŸ‘¥ Bibliotecas que Sigo'}\r\n                        </h2>\r\n                        \r\n                        {vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS && (\r\n                            <button \r\n                                className=\"btn-nueva-biblioteca-header\" \r\n                                onClick={abrirModalCrear}\r\n                            >\r\n                                âž• Nueva Biblioteca\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    {contenidoFiltrado.tipo === VISTA_TIPOS.MIS_LIBROS ? (\r\n                        <div className=\"mensaje-info\">\r\n                            {contenidoFiltrado.mensaje}\r\n                        </div>\r\n                    ) : contenidoFiltrado.contenido.length === 0 ? (\r\n                        <div className=\"mensaje-info\">\r\n                            {vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS ? \r\n                                'AÃºn no tienes bibliotecas creadas. Â¡Crea tu primera biblioteca!' : \r\n                                'No sigues ninguna biblioteca todavÃ­a. Explora bibliotecas pÃºblicas para seguirlas.'}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"bibliotecas-container\">\r\n                            {contenidoFiltrado.contenido.map((biblioteca) => (\r\n                                <div \r\n                                    key={biblioteca.id} \r\n                                    className=\"biblioteca-card\"\r\n                                    onClick={() => expandirBiblioteca(biblioteca)}\r\n                                >\r\n                                    <div className=\"biblioteca-header-card\">\r\n                                        <span className=\"icono\">{biblioteca.esPublica ? 'ðŸŒ' : 'ðŸ”’'}</span>\r\n                                        <h3 className=\"biblioteca-nombre\">{biblioteca.nombre}</h3>\r\n                                    </div>\r\n\r\n                                    <p className=\"biblioteca-descripcion\">\r\n                                        {biblioteca.descripcion|| 'Sin descripciÃ³n'}\r\n                                    </p>\r\n\r\n                                    <div className=\"mini-estanteria\">\r\n                                        {biblioteca.libros && biblioteca.libros.length > 0 ? (\r\n                                            biblioteca.libros.slice(0, 6).map((libro) => (\r\n                                                <div key={libro.id} className=\"libro-mini-wrapper\">\r\n                                                    <img \r\n                                                        src={`${API_URL}/api/libros/portada/${libro.id}`}\r\n                                                        alt={libro.titulo}\r\n                                                        className=\"mini-portada\"\r\n                                                        onError={(e) => handleImageError(e, libro.id)}\r\n                                                    />\r\n                                                    <div className={`libro-placeholder ${obtenerColorLibro(libro.id)}`}>\r\n                                                        ðŸ“–\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))\r\n                                        ) : (\r\n                                            <span className=\"sin-libros-mini\">Sin libros aÃºn</span>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    <div className=\"biblioteca-footer\">\r\n                                        <span className={biblioteca.esPublica ? \"badge-publica\" : \"badge-privada\"}>\r\n                                            {biblioteca.esPublica ? 'PÃºblica' : 'Privada'}\r\n                                        </span>\r\n\r\n                                        <span className=\"cantidad\">\r\n                                            ðŸ“– {biblioteca.libros?.length || 0}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </section>\r\n            \r\n            </div>\r\n\r\n            {/* MODAL CREAR BIBLIOTECA */}\r\n            {mostrarModalCrear && (\r\n                <div className=\"modal-crear-biblioteca\" onClick={cerrarModalCrear}>\r\n                    <div className=\"modal-crear-contenido\" onClick={(e) => e.stopPropagation()}>\r\n                        <h2>ðŸ“š Crear Nueva Biblioteca</h2>\r\n                        {mensaje && (<div className={mensaje.includes('âœ…') ? 'mensaje-exito' : 'mensaje-error'}>{mensaje}</div>)}\r\n                        <div className=\"form-group\"><label>Nombre *</label><input type=\"text\" name=\"nombre\" value={formData.nombre} onChange={handleInputChange} placeholder=\"Mi Biblioteca de...\"/></div>\r\n                        <div className=\"form-group\"><label>DescripciÃ³n</label><textarea name=\"descripcion\" value={formData.descripcion} onChange={handleInputChange} placeholder=\"Describe tu biblioteca...\"/></div>\r\n                        <div className=\"form-group\">\r\n                            <label>Visibilidad</label>\r\n                            <div className=\"visibilidad-opciones\">\r\n                                <div className={`opcion-visibilidad ${!formData.esPublica ? 'activa' : ''}`} onClick={() => handleVisibilidadChange(false)}>\r\n                                    <div className=\"icono-opcion\">ðŸ”’</div><h3>Privada</h3><p>Solo tÃº puedes verla</p>\r\n                                </div>\r\n                                <div className={`opcion-visibilidad ${formData.esPublica ? 'activa' : ''}`} onClick={() => handleVisibilidadChange(true)}>\r\n                                    <div className=\"icono-opcion\">ðŸŒ</div><h3>PÃºblica</h3><p>Visible en el explorador</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"modal-botones\">\r\n                            <button className=\"btn-modal btn-cancelar\" onClick={cerrarModalCrear}>Cancelar</button>\r\n                            <button className=\"btn-modal btn-crear\" onClick={crearBiblioteca} disabled={cargando}>{cargando ? 'Creando...' : 'Crear Biblioteca'}</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* VISTA EXPANDIDA */}\r\n            {bibliotecaExpandida && (\r\n                <div className=\"biblioteca-expandida\" onClick={cerrarExpandida}>\r\n                    <div className=\"biblioteca-expandida-contenido\" onClick={(e) => e.stopPropagation()}>\r\n                        <div className=\"biblioteca-expandida-header\">\r\n                            <h2>\r\n                                <span>{bibliotecaExpandida.esPublica ? 'ðŸŒ' : 'ðŸ”’'}</span>\r\n                                {bibliotecaExpandida.nombre}\r\n                            </h2>\r\n                            <button className=\"btn-cerrar\" onClick={cerrarExpandida}>Ã—</button>\r\n                        </div>\r\n\r\n                        <div className=\"biblioteca-expandida-body\">\r\n                            <div className=\"biblioteca-expandida-info\">\r\n                                <p><strong>DescripciÃ³n:</strong> {bibliotecaExpandida.descripcion || 'Sin descripciÃ³n'}</p>\r\n                                <p><strong>Creador:</strong> @{bibliotecaExpandida.creador?.username}</p>\r\n                                <p>\r\n                                    <strong>Visibilidad:</strong> \r\n                                    <span className={bibliotecaExpandida.esPublica ? \"badge-publica\" : \"badge-privada\"} style={{marginLeft: '0.5rem'}}>\r\n                                        {bibliotecaExpandida.esPublica ? 'PÃºblica' : 'Privada'}\r\n                                    </span>\r\n                                </p>\r\n                                <p><strong>Total de libros:</strong> {bibliotecaExpandida.libros?.length || 0}</p>\r\n                                \r\n                                {vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS && (\r\n                                    <button \r\n                                        className=\"btn-eliminar\"\r\n                                        onClick={() => eliminarBiblioteca(bibliotecaExpandida.id)}\r\n                                    >\r\n                                        ðŸ—‘ï¸ Eliminar Biblioteca\r\n                                    </button>\r\n                                )}\r\n\r\n                                {vistaActiva === VISTA_TIPOS.SEGUIDOS && (\r\n                                    <button \r\n                                        className=\"btn-dejar-seguir\"\r\n                                        onClick={(e) => dejarDeSeguirBiblioteca(bibliotecaExpandida.id, e)}\r\n                                    >\r\n                                        ðŸ’” Dejar de Seguir\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"estanteria-grande\">\r\n                                {bibliotecaExpandida.libros && bibliotecaExpandida.libros.length > 0 ? (\r\n                                    bibliotecaExpandida.libros.map((libro) => (\r\n                                        <div \r\n                                            key={libro.id} \r\n                                            className=\"libro-grande\"\r\n                                            onClick={(e) => abrirLibro(libro, e)}\r\n                                        >\r\n                                            {vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS && (\r\n                                                <button \r\n                                                    className=\"btn-eliminar-libro\"\r\n                                                    onClick={(e) => eliminarLibroDeBiblioteca(bibliotecaExpandida.id, libro.id, e)}\r\n                                                    title=\"Eliminar de la biblioteca\"\r\n                                                >\r\n                                                    Ã—\r\n                                                </button>\r\n                                            )}\r\n                                            <div className=\"libro-grande-portada-wrapper\">\r\n                                                <img \r\n                                                    src={`${API_URL}/api/libros/portada/${libro.id}`}\r\n                                                    alt={libro.titulo}\r\n                                                    onError={(e) => handleImageError(e, libro.id)}\r\n                                                />\r\n                                                <div className={`libro-placeholder-grande ${obtenerColorLibro(libro.id)}`}>\r\n                                                    ðŸ“š\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"libro-grande-titulo\">{libro.titulo}</div>\r\n                                        </div>\r\n                                    ))\r\n                                ) : (\r\n                                    <div className=\"sin-libros-grande\">\r\n                                        ðŸ“š Esta biblioteca aÃºn no tiene libros\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* LECTOR DE PDF */}\r\n            {libroAbierto && (\r\n                <LectorLibro \r\n                    url={`${API_URL}/api/libros/pdf/${libroAbierto.id}`}\r\n                    onClose={cerrarLibro}\r\n                />\r\n            )}\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PerfilPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}