{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./explorador.css';import LectorLibro from'./lectorlibro';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://localhost:8081';function ExploradorLibros(_ref){var _bibliotecaSelecciona,_bibliotecaSelecciona2;let{usuario}=_ref;const[libros,setLibros]=useState([]);const[bibliotecas,setBibliotecas]=useState([]);const[misBibliotecas,setMisBibliotecas]=useState([]);const[bibliotecasSeguidas,setBibliotecasSeguidas]=useState([]);const[libroSeleccionado,setLibroSeleccionado]=useState(null);const[bibliotecaSeleccionada,setBibliotecaSeleccionada]=useState(null);const[mostrarModalInfoLibro,setMostrarModalInfoLibro]=useState(false);const[mostrarModalInfoBiblioteca,setMostrarModalInfoBiblioteca]=useState(false);const[mostrarModalAgregarLibro,setMostrarModalAgregarLibro]=useState(false);const[libroAbierto,setLibroAbierto]=useState(null);const[bibliotecaDestino,setBibliotecaDestino]=useState('');const[mensaje,setMensaje]=useState('');const[cargando,setCargando]=useState(false);const[busqueda,setBusqueda]=useState('');const[filtroTipo,setFiltroTipo]=useState('todos');useEffect(()=>{cargarLibros();cargarBibliotecas();cargarMisBibliotecas();cargarBibliotecasSeguidas();},[]);const cargarLibros=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/api/libros/listar\"));const data=await response.json();const librosVisibles=data.filter(libro=>{if(libro.esPublico)return true;if(libro.biblioteca)return libro.biblioteca.creador.id===usuario.id;return false;});setLibros(librosVisibles);}catch(error){console.error('Error al cargar libros:',error);}};const cargarBibliotecas=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/api/bibliotecas/listar\"));if(!response.ok)throw new Error(\"HTTP error! status: \".concat(response.status));const data=await response.json();console.log('üîç TODAS las bibliotecas recibidas del backend:',data);if(Array.isArray(data)){// Mostrar TODAS las bibliotecas p√∫blicas (excepto las propias)\nconst bibliotecasPublicas=data.filter(b=>{const esPublica=b.esPublica;const noEsMia=b.creador&&b.creador.id!==usuario.id;console.log(\"Biblioteca \\\"\".concat(b.nombre,\"\\\": P\\xFAblica=\").concat(esPublica,\", NoEsMia=\").concat(noEsMia,\", Seguidores:\"),b.seguidores);return esPublica&&noEsMia;});console.log('üìö Bibliotecas filtradas para mostrar:',bibliotecasPublicas.map(b=>b.nombre));setBibliotecas(bibliotecasPublicas);}}catch(error){console.error('Error al cargar bibliotecas:',error);setBibliotecas([]);}};const cargarMisBibliotecas=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/api/bibliotecas/listar\"));if(!response.ok)throw new Error(\"HTTP error! status: \".concat(response.status));const data=await response.json();if(Array.isArray(data)){const mias=data.filter(b=>b.creador&&b.creador.id===usuario.id);setMisBibliotecas(mias);}}catch(error){console.error('Error al cargar mis bibliotecas:',error);setMisBibliotecas([]);}};const cargarBibliotecasSeguidas=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/api/bibliotecas/listar\"));if(!response.ok)throw new Error(\"HTTP error! status: \".concat(response.status));const data=await response.json();console.log('üìö Cargando bibliotecas seguidas...');if(Array.isArray(data)){// Filtrar bibliotecas donde el usuario est√° en la lista de seguidores\nconst seguidas=data.filter(b=>b.seguidores&&b.seguidores.some(seg=>seg.id===usuario.id));console.log('‚úÖ Bibliotecas que sigo:',seguidas.map(b=>b.nombre));setBibliotecasSeguidas(seguidas.map(b=>b.id));}}catch(error){console.error('Error al cargar bibliotecas seguidas:',error);}};const librosFiltrados=libros.filter(libro=>libro.titulo.toLowerCase().includes(busqueda.toLowerCase())||libro.autor.toLowerCase().includes(busqueda.toLowerCase()));const bibliotecasFiltradas=bibliotecas.filter(bib=>bib.nombre.toLowerCase().includes(busqueda.toLowerCase())||bib.descripcion&&bib.descripcion.toLowerCase().includes(busqueda.toLowerCase())||bib.creador&&bib.creador.username.toLowerCase().includes(busqueda.toLowerCase()));const abrirModalInfoLibro=libro=>{setLibroSeleccionado(libro);setMostrarModalInfoLibro(true);};const abrirModalInfoBiblioteca=biblioteca=>{setBibliotecaSeleccionada(biblioteca);setMostrarModalInfoBiblioteca(true);};const abrirModalAgregarLibro=libro=>{setLibroSeleccionado(libro);setMostrarModalAgregarLibro(true);setBibliotecaDestino('');setMensaje('');};const abrirLibro=libro=>{setLibroAbierto(libro);};const cerrarLibro=()=>{setLibroAbierto(null);};const cerrarModales=()=>{setMostrarModalInfoLibro(false);setMostrarModalInfoBiblioteca(false);setMostrarModalAgregarLibro(false);setLibroSeleccionado(null);setBibliotecaSeleccionada(null);setMensaje('');cargarLibros();};const agregarLibroABiblioteca=async()=>{if(!bibliotecaDestino){setMensaje('‚ùå Debes seleccionar una biblioteca');return;}setCargando(true);try{const response=await fetch(\"\".concat(API_URL,\"/api/bibliotecas/\").concat(bibliotecaDestino,\"/agregar-libro/\").concat(libroSeleccionado.id),{method:'POST'});if(response.ok){setMensaje('‚úÖ ¬°Libro agregado exitosamente!');setTimeout(()=>{cerrarModales();cargarMisBibliotecas();},1500);}else{const error=await response.text();setMensaje(\"\\u274C \".concat(error));}}catch(error){console.error('Error:',error);setMensaje('‚ùå Error al agregar el libro');}finally{setCargando(false);}};const seguirBiblioteca=async(bibliotecaId,e)=>{if(e)e.stopPropagation();const estaSiguiendo=bibliotecasSeguidas.includes(bibliotecaId);console.log(\"\".concat(estaSiguiendo?'Dejando de seguir':'Siguiendo',\" biblioteca \").concat(bibliotecaId));try{let response;if(estaSiguiendo){// Dejar de seguir\nresponse=await fetch(\"\".concat(API_URL,\"/api/usuarios/\").concat(usuario.id,\"/dejar-de-seguir-biblioteca/\").concat(bibliotecaId),{method:'DELETE'});}else{// Seguir\nresponse=await fetch(\"\".concat(API_URL,\"/api/usuarios/\").concat(usuario.id,\"/seguir-biblioteca/\").concat(bibliotecaId),{method:'POST'});}const responseText=await response.text();console.log('Respuesta del servidor:',responseText);if(response.ok){// Actualizar el estado local INMEDIATAMENTE\nif(estaSiguiendo){setBibliotecasSeguidas(prev=>{const nuevas=prev.filter(id=>id!==bibliotecaId);console.log('Estado actualizado - Ya no sigues:',nuevas);return nuevas;});mostrarNotificacion('üíî Has dejado de seguir esta biblioteca');}else{setBibliotecasSeguidas(prev=>{const nuevas=[...prev,bibliotecaId];console.log('Estado actualizado - Ahora sigues:',nuevas);return nuevas;});mostrarNotificacion('‚≠ê ¬°Ahora sigues esta biblioteca!');}// Recargar despu√©s para sincronizar con el backend\nsetTimeout(()=>{cargarBibliotecas();cargarBibliotecasSeguidas();},500);}else{mostrarNotificacion(\"\\u274C \".concat(responseText));}}catch(error){console.error('Error:',error);mostrarNotificacion('‚ùå Error de conexi√≥n');}};const mostrarNotificacion=texto=>{setMensaje(texto);setTimeout(()=>setMensaje(''),3000);};const estaSiguiendoBiblioteca=bibliotecaId=>{return bibliotecasSeguidas.includes(bibliotecaId);};const esCreadorDeBiblioteca=biblioteca=>{return biblioteca.creador&&biblioteca.creador.id===usuario.id;};const estaEnMiBiblioteca=libro=>{if(!libro.esPublico&&libro.biblioteca){return libro.biblioteca.creador.id===usuario.id;}return false;};const obtenerColorLibro=id=>{const colores=8;return\"color-\".concat(id%colores+1);};const totalResultados=()=>{if(filtroTipo==='libros')return librosFiltrados.length;if(filtroTipo==='bibliotecas')return bibliotecasFiltradas.length;return librosFiltrados.length+bibliotecasFiltradas.length;};return/*#__PURE__*/_jsxs(\"div\",{className:\"explorador-wrapper day\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"explorador-header\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"titulo\",children:[\"\\uD83D\\uDCDA EXPLORADOR DE \",/*#__PURE__*/_jsx(\"span\",{className:\"highlight\",children:\"LIBROS Y BIBLIOTECAS\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitulo\",children:\"Descubre y agrega contenido a tus bibliotecas\"})]}),mensaje&&!mostrarModalAgregarLibro&&/*#__PURE__*/_jsx(\"div\",{className:\"notificacion-flotante \".concat(mensaje.includes('‚ùå')?'error':'exito'),children:mensaje}),/*#__PURE__*/_jsxs(\"div\",{className:\"busqueda-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"search-icon\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar por t\\xEDtulo, autor, nombre de biblioteca...\",value:busqueda,onChange:e=>setBusqueda(e.target.value),className:\"input-busqueda\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filtros-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-filtro \".concat(filtroTipo==='todos'?'activo':''),onClick:()=>setFiltroTipo('todos'),children:\"\\uD83D\\uDCE6 Todos\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-filtro \".concat(filtroTipo==='libros'?'activo':''),onClick:()=>setFiltroTipo('libros'),children:\"\\uD83D\\uDCD6 Solo Libros\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-filtro \".concat(filtroTipo==='bibliotecas'?'activo':''),onClick:()=>setFiltroTipo('bibliotecas'),children:\"\\uD83D\\uDCDA Solo Bibliotecas\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"resultados-info\",children:[totalResultados(),\" resultado\",totalResultados()!==1?'s':'',\" encontrado\",totalResultados()!==1?'s':'']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid\",children:[(filtroTipo==='todos'||filtroTipo==='libros')&&librosFiltrados.map(libro=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"portada-container\",onClick:()=>abrirLibro(libro),style:{cursor:'pointer'},children:[libro.rutaPortada?/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(API_URL).concat(libro.rutaPortada),alt:libro.titulo,className:\"portada\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"portada-placeholder\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icono-libro\",children:\"\\uD83D\\uDCD6\"}),/*#__PURE__*/_jsx(\"p\",{className:\"sin-portada\",children:\"Sin portada\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-info\",onClick:e=>{e.stopPropagation();abrirModalInfoLibro(libro);},title:\"Ver informaci\\xF3n\",children:\"\\u2139\\uFE0F\"}),libro.esPublico&&/*#__PURE__*/_jsx(\"span\",{className:\"badge-publico\",children:\"\\uD83C\\uDF0D P\\xFAblico\"}),!libro.esPublico&&libro.biblioteca&&/*#__PURE__*/_jsxs(\"span\",{className:\"badge-privado\",children:[\"\\uD83D\\uDD12 \",libro.biblioteca.nombre]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"titulo-libro\",children:libro.titulo}),/*#__PURE__*/_jsxs(\"p\",{className:\"autor-libro\",children:[\"\\uD83D\\uDC64 \",libro.autor]}),libro.esPublico&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-agregar\",onClick:()=>abrirModalAgregarLibro(libro),children:\"\\u2795 Agregar a biblioteca\"}),estaEnMiBiblioteca(libro)&&/*#__PURE__*/_jsx(\"div\",{className:\"libro-en-biblioteca\",children:\"\\u2713 En tu biblioteca\"})]})]},\"libro-\".concat(libro.id))),(filtroTipo==='todos'||filtroTipo==='bibliotecas')&&bibliotecasFiltradas.map(biblioteca=>{var _biblioteca$creador,_biblioteca$libros;return/*#__PURE__*/_jsxs(\"div\",{className:\"card card-biblioteca\",onClick:()=>abrirModalInfoBiblioteca(biblioteca),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"biblioteca-preview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"biblioteca-icono-grande\",children:\"\\uD83D\\uDCDA\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mini-estanteria-explorador\",children:biblioteca.libros&&biblioteca.libros.length>0?biblioteca.libros.slice(0,4).map(libro=>/*#__PURE__*/_jsxs(\"div\",{className:\"libro-mini-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(API_URL,\"/api/libros/portada/\").concat(libro.id),alt:libro.titulo,className:\"mini-portada\",onError:e=>{e.target.style.display='none';e.target.nextSibling.classList.add('visible');}}),/*#__PURE__*/_jsx(\"div\",{className:\"libro-placeholder \".concat(obtenerColorLibro(libro.id)),children:\"\\uD83D\\uDCD6\"})]},libro.id)):/*#__PURE__*/_jsx(\"span\",{className:\"sin-libros-mini\",children:\"Sin libros\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"biblioteca-header-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icono-biblioteca\",children:\"\\uD83C\\uDF0D\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"titulo-biblioteca\",children:biblioteca.nombre})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"creador-biblioteca\",children:[\"\\uD83D\\uDC64 \",(_biblioteca$creador=biblioteca.creador)===null||_biblioteca$creador===void 0?void 0:_biblioteca$creador.username]}),/*#__PURE__*/_jsx(\"p\",{className:\"descripcion-biblioteca\",children:biblioteca.descripcion||'Sin descripci√≥n'}),/*#__PURE__*/_jsx(\"div\",{className:\"biblioteca-stats\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[\"\\uD83D\\uDCD6 \",((_biblioteca$libros=biblioteca.libros)===null||_biblioteca$libros===void 0?void 0:_biblioteca$libros.length)||0,\" libros\"]})}),!esCreadorDeBiblioteca(biblioteca)&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-seguir \".concat(estaSiguiendoBiblioteca(biblioteca.id)?'siguiendo':''),onClick:e=>seguirBiblioteca(biblioteca.id,e),children:estaSiguiendoBiblioteca(biblioteca.id)?'‚úì Siguiendo':'‚≠ê Seguir biblioteca'})]})]},\"biblioteca-\".concat(biblioteca.id));})]}),totalResultados()===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"no-resultados\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icono-grande\",children:filtroTipo==='libros'?'üìñ':filtroTipo==='bibliotecas'?'üìö':'üì¶'}),/*#__PURE__*/_jsx(\"p\",{className:\"no-resultados-texto\",children:busqueda?\"No se encontraron \".concat(filtroTipo==='todos'?'resultados':filtroTipo,\" con esa b\\xFAsqueda\"):\"No hay \".concat(filtroTipo==='todos'?'contenido':filtroTipo,\" disponible\")})]}),mostrarModalInfoLibro&&libroSeleccionado&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:cerrarModales,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cerrar\",onClick:cerrarModales,children:\"\\u2715\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"modal-titulo\",children:libroSeleccionado.titulo}),libroSeleccionado.esPublico?/*#__PURE__*/_jsx(\"span\",{className:\"badge-modal-publico\",children:\"\\uD83C\\uDF0D Libro P\\xFAblico\"}):/*#__PURE__*/_jsx(\"span\",{className:\"badge-modal-privado\",children:\"\\uD83D\\uDD12 Libro Privado\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDC64 Autor:\"}),\" \",libroSeleccionado.autor]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCDD Descripci\\xF3n:\"}),\" \",libroSeleccionado.descripcion||'Sin descripci√≥n']}),!libroSeleccionado.esPublico&&libroSeleccionado.biblioteca&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCDA Biblioteca:\"}),\" \",libroSeleccionado.biblioteca.nombre]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-leer\",onClick:()=>{cerrarModales();abrirLibro(libroSeleccionado);},children:\"\\uD83D\\uDCD6 Leer libro\"})]})]})}),mostrarModalInfoBiblioteca&&bibliotecaSeleccionada&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:cerrarModales,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal modal-biblioteca\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cerrar\",onClick:cerrarModales,children:\"\\u2715\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"modal-titulo\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCDA\"}),\" \",bibliotecaSeleccionada.nombre]}),/*#__PURE__*/_jsx(\"span\",{className:\"badge-modal-publico\",children:\"\\uD83C\\uDF0D Biblioteca P\\xFAblica\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDC64 Creador:\"}),\" \",(_bibliotecaSelecciona=bibliotecaSeleccionada.creador)===null||_bibliotecaSelecciona===void 0?void 0:_bibliotecaSelecciona.username]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCDD Descripci\\xF3n:\"}),\" \",bibliotecaSeleccionada.descripcion||'Sin descripci√≥n']}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCD6 Total de libros:\"}),\" \",((_bibliotecaSelecciona2=bibliotecaSeleccionada.libros)===null||_bibliotecaSelecciona2===void 0?void 0:_bibliotecaSelecciona2.length)||0]}),bibliotecaSeleccionada.libros&&bibliotecaSeleccionada.libros.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"libros-preview\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCDA Libros en esta biblioteca:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"lista-libros-modal\",children:bibliotecaSeleccionada.libros.map(libro=>/*#__PURE__*/_jsxs(\"div\",{className:\"libro-item-modal\",onClick:()=>{cerrarModales();abrirLibro(libro);},style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"libro-icono\",children:\"\\uD83D\\uDCD6\"}),/*#__PURE__*/_jsx(\"span\",{className:\"libro-titulo-modal\",children:libro.titulo})]},libro.id))})]}),!esCreadorDeBiblioteca(bibliotecaSeleccionada)&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-seguir-modal \".concat(estaSiguiendoBiblioteca(bibliotecaSeleccionada.id)?'siguiendo':''),onClick:e=>seguirBiblioteca(bibliotecaSeleccionada.id,e),children:estaSiguiendoBiblioteca(bibliotecaSeleccionada.id)?'‚úì Siguiendo':'‚≠ê Seguir esta biblioteca'})]})]})}),mostrarModalAgregarLibro&&libroSeleccionado&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:cerrarModales,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cerrar\",onClick:cerrarModales,children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-header\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"modal-titulo\",children:[\"Agregar \\\"\",libroSeleccionado.titulo,\"\\\"\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[mensaje&&/*#__PURE__*/_jsx(\"div\",{className:mensaje.includes('‚úÖ')?'mensaje-exito':'mensaje-error',children:mensaje}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Selecciona una biblioteca:\"}),/*#__PURE__*/_jsxs(\"select\",{value:bibliotecaDestino,onChange:e=>setBibliotecaDestino(e.target.value),className:\"select-biblioteca\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Seleccionar --\"}),misBibliotecas.map(bib=>/*#__PURE__*/_jsxs(\"option\",{value:bib.id,children:[bib.esPublica?'üåç':'üîí',\" \",bib.nombre]},bib.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-botones\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-modal btn-cancelar\",onClick:cerrarModales,children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-modal btn-confirmar\",onClick:agregarLibroABiblioteca,disabled:cargando,children:cargando?'Agregando...':'Agregar'})]})]})]})}),libroAbierto&&/*#__PURE__*/_jsx(LectorLibro,{url:\"\".concat(API_URL,\"/api/libros/pdf/\").concat(libroAbierto.id),onClose:cerrarLibro})]});}export default ExploradorLibros;","map":{"version":3,"names":["React","useState","useEffect","LectorLibro","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","ExploradorLibros","_ref","_bibliotecaSelecciona","_bibliotecaSelecciona2","usuario","libros","setLibros","bibliotecas","setBibliotecas","misBibliotecas","setMisBibliotecas","bibliotecasSeguidas","setBibliotecasSeguidas","libroSeleccionado","setLibroSeleccionado","bibliotecaSeleccionada","setBibliotecaSeleccionada","mostrarModalInfoLibro","setMostrarModalInfoLibro","mostrarModalInfoBiblioteca","setMostrarModalInfoBiblioteca","mostrarModalAgregarLibro","setMostrarModalAgregarLibro","libroAbierto","setLibroAbierto","bibliotecaDestino","setBibliotecaDestino","mensaje","setMensaje","cargando","setCargando","busqueda","setBusqueda","filtroTipo","setFiltroTipo","cargarLibros","cargarBibliotecas","cargarMisBibliotecas","cargarBibliotecasSeguidas","response","fetch","concat","data","json","librosVisibles","filter","libro","esPublico","biblioteca","creador","id","error","console","ok","Error","status","log","Array","isArray","bibliotecasPublicas","b","esPublica","noEsMia","nombre","seguidores","map","mias","seguidas","some","seg","librosFiltrados","titulo","toLowerCase","includes","autor","bibliotecasFiltradas","bib","descripcion","username","abrirModalInfoLibro","abrirModalInfoBiblioteca","abrirModalAgregarLibro","abrirLibro","cerrarLibro","cerrarModales","agregarLibroABiblioteca","method","setTimeout","text","seguirBiblioteca","bibliotecaId","e","stopPropagation","estaSiguiendo","responseText","prev","nuevas","mostrarNotificacion","texto","estaSiguiendoBiblioteca","esCreadorDeBiblioteca","estaEnMiBiblioteca","obtenerColorLibro","colores","totalResultados","length","className","children","type","placeholder","value","onChange","target","onClick","style","cursor","rutaPortada","src","alt","title","_biblioteca$creador","_biblioteca$libros","slice","onError","display","nextSibling","classList","add","disabled","url","onClose"],"sources":["C:/Users/Geo/Desktop/TFG/frontend/src/componentes/explorador.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './explorador.css';\r\nimport LectorLibro from './lectorlibro';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8081';\r\n\r\nfunction ExploradorLibros({ usuario }) {\r\n  const [libros, setLibros] = useState([]);\r\n  const [bibliotecas, setBibliotecas] = useState([]);\r\n  const [misBibliotecas, setMisBibliotecas] = useState([]);\r\n  const [bibliotecasSeguidas, setBibliotecasSeguidas] = useState([]);\r\n  const [libroSeleccionado, setLibroSeleccionado] = useState(null);\r\n  const [bibliotecaSeleccionada, setBibliotecaSeleccionada] = useState(null);\r\n  const [mostrarModalInfoLibro, setMostrarModalInfoLibro] = useState(false);\r\n  const [mostrarModalInfoBiblioteca, setMostrarModalInfoBiblioteca] = useState(false);\r\n  const [mostrarModalAgregarLibro, setMostrarModalAgregarLibro] = useState(false);\r\n  const [libroAbierto, setLibroAbierto] = useState(null);\r\n  const [bibliotecaDestino, setBibliotecaDestino] = useState('');\r\n  const [mensaje, setMensaje] = useState('');\r\n  const [cargando, setCargando] = useState(false);\r\n  const [busqueda, setBusqueda] = useState('');\r\n  const [filtroTipo, setFiltroTipo] = useState('todos');\r\n\r\n  useEffect(() => {\r\n    cargarLibros();\r\n    cargarBibliotecas();\r\n    cargarMisBibliotecas();\r\n    cargarBibliotecasSeguidas();\r\n  }, []);\r\n\r\n  const cargarLibros = async () => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/api/libros/listar`);\r\n      const data = await response.json();\r\n      const librosVisibles = data.filter(libro => {\r\n        if (libro.esPublico) return true;\r\n        if (libro.biblioteca) return libro.biblioteca.creador.id === usuario.id;\r\n        return false;\r\n      });\r\n      setLibros(librosVisibles);\r\n    } catch (error) {\r\n      console.error('Error al cargar libros:', error);\r\n    }\r\n  };\r\n\r\n  const cargarBibliotecas = async () => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/api/bibliotecas/listar`);\r\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\r\n      const data = await response.json();\r\n      console.log('üîç TODAS las bibliotecas recibidas del backend:', data);\r\n      \r\n      if (Array.isArray(data)) {\r\n        // Mostrar TODAS las bibliotecas p√∫blicas (excepto las propias)\r\n        const bibliotecasPublicas = data.filter(b => {\r\n          const esPublica = b.esPublica;\r\n          const noEsMia = b.creador && b.creador.id !== usuario.id;\r\n          console.log(`Biblioteca \"${b.nombre}\": P√∫blica=${esPublica}, NoEsMia=${noEsMia}, Seguidores:`, b.seguidores);\r\n          return esPublica && noEsMia;\r\n        });\r\n        \r\n        console.log('üìö Bibliotecas filtradas para mostrar:', bibliotecasPublicas.map(b => b.nombre));\r\n        setBibliotecas(bibliotecasPublicas);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al cargar bibliotecas:', error);\r\n      setBibliotecas([]);\r\n    }\r\n  };\r\n\r\n  const cargarMisBibliotecas = async () => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/api/bibliotecas/listar`);\r\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\r\n      const data = await response.json();\r\n      if (Array.isArray(data)) {\r\n        const mias = data.filter(b => b.creador && b.creador.id === usuario.id);\r\n        setMisBibliotecas(mias);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al cargar mis bibliotecas:', error);\r\n      setMisBibliotecas([]);\r\n    }\r\n  };\r\n\r\n  const cargarBibliotecasSeguidas = async () => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/api/bibliotecas/listar`);\r\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\r\n      const data = await response.json();\r\n      console.log('üìö Cargando bibliotecas seguidas...');\r\n      if (Array.isArray(data)) {\r\n        // Filtrar bibliotecas donde el usuario est√° en la lista de seguidores\r\n        const seguidas = data.filter(b => \r\n          b.seguidores && b.seguidores.some(seg => seg.id === usuario.id)\r\n        );\r\n        console.log('‚úÖ Bibliotecas que sigo:', seguidas.map(b => b.nombre));\r\n        setBibliotecasSeguidas(seguidas.map(b => b.id));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al cargar bibliotecas seguidas:', error);\r\n    }\r\n  };\r\n\r\n  const librosFiltrados = libros.filter(libro =>\r\n    libro.titulo.toLowerCase().includes(busqueda.toLowerCase()) ||\r\n    libro.autor.toLowerCase().includes(busqueda.toLowerCase())\r\n  );\r\n\r\n  const bibliotecasFiltradas = bibliotecas.filter(bib =>\r\n    bib.nombre.toLowerCase().includes(busqueda.toLowerCase()) ||\r\n    (bib.descripcion && bib.descripcion.toLowerCase().includes(busqueda.toLowerCase())) ||\r\n    (bib.creador && bib.creador.username.toLowerCase().includes(busqueda.toLowerCase()))\r\n  );\r\n\r\n  const abrirModalInfoLibro = (libro) => {\r\n    setLibroSeleccionado(libro);\r\n    setMostrarModalInfoLibro(true);\r\n  };\r\n\r\n  const abrirModalInfoBiblioteca = (biblioteca) => {\r\n    setBibliotecaSeleccionada(biblioteca);\r\n    setMostrarModalInfoBiblioteca(true);\r\n  };\r\n\r\n  const abrirModalAgregarLibro = (libro) => {\r\n    setLibroSeleccionado(libro);\r\n    setMostrarModalAgregarLibro(true);\r\n    setBibliotecaDestino('');\r\n    setMensaje('');\r\n  };\r\n\r\n  const abrirLibro = (libro) => {\r\n    setLibroAbierto(libro);\r\n  };\r\n\r\n  const cerrarLibro = () => {\r\n    setLibroAbierto(null);\r\n  };\r\n\r\n  const cerrarModales = () => {\r\n    setMostrarModalInfoLibro(false);\r\n    setMostrarModalInfoBiblioteca(false);\r\n    setMostrarModalAgregarLibro(false);\r\n    setLibroSeleccionado(null);\r\n    setBibliotecaSeleccionada(null);\r\n    setMensaje('');\r\n    cargarLibros();\r\n  };\r\n\r\n  const agregarLibroABiblioteca = async () => {\r\n    if (!bibliotecaDestino) {\r\n      setMensaje('‚ùå Debes seleccionar una biblioteca');\r\n      return;\r\n    }\r\n\r\n    setCargando(true);\r\n    try {\r\n      const response = await fetch(\r\n        `${API_URL}/api/bibliotecas/${bibliotecaDestino}/agregar-libro/${libroSeleccionado.id}`,\r\n        { method: 'POST' }\r\n      );\r\n\r\n      if (response.ok) {\r\n        setMensaje('‚úÖ ¬°Libro agregado exitosamente!');\r\n        setTimeout(() => {\r\n          cerrarModales();\r\n          cargarMisBibliotecas();\r\n        }, 1500);\r\n      } else {\r\n        const error = await response.text();\r\n        setMensaje(`‚ùå ${error}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setMensaje('‚ùå Error al agregar el libro');\r\n    } finally {\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  const seguirBiblioteca = async (bibliotecaId, e) => {\r\n    if (e) e.stopPropagation();\r\n    \r\n    const estaSiguiendo = bibliotecasSeguidas.includes(bibliotecaId);\r\n    console.log(`${estaSiguiendo ? 'Dejando de seguir' : 'Siguiendo'} biblioteca ${bibliotecaId}`);\r\n\r\n    try {\r\n      let response;\r\n      if (estaSiguiendo) {\r\n        // Dejar de seguir\r\n        response = await fetch(\r\n          `${API_URL}/api/usuarios/${usuario.id}/dejar-de-seguir-biblioteca/${bibliotecaId}`,\r\n          { method: 'DELETE' }\r\n        );\r\n      } else {\r\n        // Seguir\r\n        response = await fetch(\r\n          `${API_URL}/api/usuarios/${usuario.id}/seguir-biblioteca/${bibliotecaId}`,\r\n          { method: 'POST' }\r\n        );\r\n      }\r\n\r\n      const responseText = await response.text();\r\n      console.log('Respuesta del servidor:', responseText);\r\n\r\n      if (response.ok) {\r\n        // Actualizar el estado local INMEDIATAMENTE\r\n        if (estaSiguiendo) {\r\n          setBibliotecasSeguidas(prev => {\r\n            const nuevas = prev.filter(id => id !== bibliotecaId);\r\n            console.log('Estado actualizado - Ya no sigues:', nuevas);\r\n            return nuevas;\r\n          });\r\n          mostrarNotificacion('üíî Has dejado de seguir esta biblioteca');\r\n        } else {\r\n          setBibliotecasSeguidas(prev => {\r\n            const nuevas = [...prev, bibliotecaId];\r\n            console.log('Estado actualizado - Ahora sigues:', nuevas);\r\n            return nuevas;\r\n          });\r\n          mostrarNotificacion('‚≠ê ¬°Ahora sigues esta biblioteca!');\r\n        }\r\n        \r\n        // Recargar despu√©s para sincronizar con el backend\r\n        setTimeout(() => {\r\n          cargarBibliotecas();\r\n          cargarBibliotecasSeguidas();\r\n        }, 500);\r\n      } else {\r\n        mostrarNotificacion(`‚ùå ${responseText}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      mostrarNotificacion('‚ùå Error de conexi√≥n');\r\n    }\r\n  };\r\n\r\n  const mostrarNotificacion = (texto) => {\r\n    setMensaje(texto);\r\n    setTimeout(() => setMensaje(''), 3000);\r\n  };\r\n\r\n  const estaSiguiendoBiblioteca = (bibliotecaId) => {\r\n    return bibliotecasSeguidas.includes(bibliotecaId);\r\n  };\r\n\r\n  const esCreadorDeBiblioteca = (biblioteca) => {\r\n    return biblioteca.creador && biblioteca.creador.id === usuario.id;\r\n  };\r\n\r\n  const estaEnMiBiblioteca = (libro) => {\r\n    if (!libro.esPublico && libro.biblioteca) {\r\n      return libro.biblioteca.creador.id === usuario.id;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const obtenerColorLibro = (id) => {\r\n    const colores = 8;\r\n    return `color-${(id % colores) + 1}`;\r\n  };\r\n\r\n  const totalResultados = () => {\r\n    if (filtroTipo === 'libros') return librosFiltrados.length;\r\n    if (filtroTipo === 'bibliotecas') return bibliotecasFiltradas.length;\r\n    return librosFiltrados.length + bibliotecasFiltradas.length;\r\n  };\r\n\r\n  return (\r\n    <div className=\"explorador-wrapper day\">\r\n      <header className=\"explorador-header\">\r\n        <h1 className=\"titulo\">üìö EXPLORADOR DE <span className=\"highlight\">LIBROS Y BIBLIOTECAS</span></h1>\r\n        <p className=\"subtitulo\">Descubre y agrega contenido a tus bibliotecas</p>\r\n      </header>\r\n\r\n      {/* Notificaci√≥n flotante */}\r\n      {mensaje && !mostrarModalAgregarLibro && (\r\n        <div className={`notificacion-flotante ${mensaje.includes('‚ùå') ? 'error' : 'exito'}`}>\r\n          {mensaje}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"busqueda-container\">\r\n        <div className=\"input-wrapper\">\r\n          <span className=\"search-icon\">üîç</span>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Buscar por t√≠tulo, autor, nombre de biblioteca...\"\r\n            value={busqueda}\r\n            onChange={(e) => setBusqueda(e.target.value)}\r\n            className=\"input-busqueda\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"filtros-container\">\r\n          <button \r\n            className={`btn-filtro ${filtroTipo === 'todos' ? 'activo' : ''}`}\r\n            onClick={() => setFiltroTipo('todos')}\r\n          >\r\n            üì¶ Todos\r\n          </button>\r\n          <button \r\n            className={`btn-filtro ${filtroTipo === 'libros' ? 'activo' : ''}`}\r\n            onClick={() => setFiltroTipo('libros')}\r\n          >\r\n            üìñ Solo Libros\r\n          </button>\r\n          <button \r\n            className={`btn-filtro ${filtroTipo === 'bibliotecas' ? 'activo' : ''}`}\r\n            onClick={() => setFiltroTipo('bibliotecas')}\r\n          >\r\n            üìö Solo Bibliotecas\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"resultados-info\">\r\n          {totalResultados()} resultado{totalResultados() !== 1 ? 's' : ''} encontrado{totalResultados() !== 1 ? 's' : ''}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid\">\r\n        {/* LIBROS */}\r\n        {(filtroTipo === 'todos' || filtroTipo === 'libros') && librosFiltrados.map(libro => (\r\n          <div key={`libro-${libro.id}`} className=\"card\">\r\n            <div className=\"portada-container\" onClick={() => abrirLibro(libro)} style={{ cursor: 'pointer' }}>\r\n              {libro.rutaPortada ? (\r\n                <img src={`${API_URL}${libro.rutaPortada}`} alt={libro.titulo} className=\"portada\" />\r\n              ) : (\r\n                <div className=\"portada-placeholder\">\r\n                  <div className=\"icono-libro\">üìñ</div>\r\n                  <p className=\"sin-portada\">Sin portada</p>\r\n                </div>\r\n              )}\r\n\r\n              <button \r\n                className=\"btn-info\" \r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  abrirModalInfoLibro(libro);\r\n                }} \r\n                title=\"Ver informaci√≥n\"\r\n              >\r\n                ‚ÑπÔ∏è\r\n              </button>\r\n              {libro.esPublico && <span className=\"badge-publico\">üåç P√∫blico</span>}\r\n              {!libro.esPublico && libro.biblioteca && <span className=\"badge-privado\">üîí {libro.biblioteca.nombre}</span>}\r\n            </div>\r\n\r\n            <div className=\"card-body\">\r\n              <h3 className=\"titulo-libro\">{libro.titulo}</h3>\r\n              <p className=\"autor-libro\">üë§ {libro.autor}</p>\r\n              \r\n              {libro.esPublico && (\r\n                <button className=\"btn-agregar\" onClick={() => abrirModalAgregarLibro(libro)}>\r\n                  ‚ûï Agregar a biblioteca\r\n                </button>\r\n              )}\r\n              {estaEnMiBiblioteca(libro) && (\r\n                <div className=\"libro-en-biblioteca\">‚úì En tu biblioteca</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        {/* BIBLIOTECAS */}\r\n        {(filtroTipo === 'todos' || filtroTipo === 'bibliotecas') && bibliotecasFiltradas.map(biblioteca => (\r\n          <div \r\n            key={`biblioteca-${biblioteca.id}`} \r\n            className=\"card card-biblioteca\"\r\n            onClick={() => abrirModalInfoBiblioteca(biblioteca)}\r\n          >\r\n            <div className=\"biblioteca-preview\">\r\n              <div className=\"biblioteca-icono-grande\">üìö</div>\r\n              <div className=\"mini-estanteria-explorador\">\r\n                {biblioteca.libros && biblioteca.libros.length > 0 ? (\r\n                  biblioteca.libros.slice(0, 4).map((libro) => (\r\n                    <div key={libro.id} className=\"libro-mini-wrapper\">\r\n                      <img \r\n                        src={`${API_URL}/api/libros/portada/${libro.id}`}\r\n                        alt={libro.titulo}\r\n                        className=\"mini-portada\"\r\n                        onError={(e) => {\r\n                          e.target.style.display = 'none';\r\n                          e.target.nextSibling.classList.add('visible');\r\n                        }}\r\n                      />\r\n                      <div className={`libro-placeholder ${obtenerColorLibro(libro.id)}`}>\r\n                        üìñ\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  <span className=\"sin-libros-mini\">Sin libros</span>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"card-body\">\r\n              <div className=\"biblioteca-header-card\">\r\n                <span className=\"icono-biblioteca\">üåç</span>\r\n                <h3 className=\"titulo-biblioteca\">{biblioteca.nombre}</h3>\r\n              </div>\r\n              \r\n              <p className=\"creador-biblioteca\">üë§ {biblioteca.creador?.username}</p>\r\n              <p className=\"descripcion-biblioteca\">\r\n                {biblioteca.descripcion || 'Sin descripci√≥n'}\r\n              </p>\r\n              \r\n              <div className=\"biblioteca-stats\">\r\n                <span className=\"stat\">üìñ {biblioteca.libros?.length || 0} libros</span>\r\n              </div>\r\n\r\n              {!esCreadorDeBiblioteca(biblioteca) && (\r\n                <button \r\n                  className={`btn-seguir ${estaSiguiendoBiblioteca(biblioteca.id) ? 'siguiendo' : ''}`}\r\n                  onClick={(e) => seguirBiblioteca(biblioteca.id, e)}\r\n                >\r\n                  {estaSiguiendoBiblioteca(biblioteca.id) ? '‚úì Siguiendo' : '‚≠ê Seguir biblioteca'}\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {totalResultados() === 0 && (\r\n        <div className=\"no-resultados\">\r\n          <div className=\"icono-grande\">\r\n            {filtroTipo === 'libros' ? 'üìñ' : filtroTipo === 'bibliotecas' ? 'üìö' : 'üì¶'}\r\n          </div>\r\n          <p className=\"no-resultados-texto\">\r\n            {busqueda \r\n              ? `No se encontraron ${filtroTipo === 'todos' ? 'resultados' : filtroTipo} con esa b√∫squeda` \r\n              : `No hay ${filtroTipo === 'todos' ? 'contenido' : filtroTipo} disponible`}\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* MODAL INFO LIBRO */}\r\n      {mostrarModalInfoLibro && libroSeleccionado && (\r\n        <div className=\"modal-overlay\" onClick={cerrarModales}>\r\n          <div className=\"modal\" onClick={e => e.stopPropagation()}>\r\n            <button className=\"btn-cerrar\" onClick={cerrarModales}>‚úï</button>\r\n            <div className=\"modal-header\">\r\n              <h2 className=\"modal-titulo\">{libroSeleccionado.titulo}</h2>\r\n              {libroSeleccionado.esPublico ? (\r\n                <span className=\"badge-modal-publico\">üåç Libro P√∫blico</span>\r\n              ) : (\r\n                <span className=\"badge-modal-privado\">üîí Libro Privado</span>\r\n              )}\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <div className=\"info-item\"><strong>üë§ Autor:</strong> {libroSeleccionado.autor}</div>\r\n              <div className=\"info-item\"><strong>üìù Descripci√≥n:</strong> {libroSeleccionado.descripcion || 'Sin descripci√≥n'}</div>\r\n              {!libroSeleccionado.esPublico && libroSeleccionado.biblioteca && (\r\n                <div className=\"info-item\"><strong>üìö Biblioteca:</strong> {libroSeleccionado.biblioteca.nombre}</div>\r\n              )}\r\n              <button \r\n                className=\"btn-leer\"\r\n                onClick={() => {\r\n                  cerrarModales();\r\n                  abrirLibro(libroSeleccionado);\r\n                }}\r\n              >\r\n                üìñ Leer libro\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* MODAL INFO BIBLIOTECA */}\r\n      {mostrarModalInfoBiblioteca && bibliotecaSeleccionada && (\r\n        <div className=\"modal-overlay\" onClick={cerrarModales}>\r\n          <div className=\"modal modal-biblioteca\" onClick={e => e.stopPropagation()}>\r\n            <button className=\"btn-cerrar\" onClick={cerrarModales}>‚úï</button>\r\n            <div className=\"modal-header\">\r\n              <h2 className=\"modal-titulo\">\r\n                <span>üìö</span> {bibliotecaSeleccionada.nombre}\r\n              </h2>\r\n              <span className=\"badge-modal-publico\">üåç Biblioteca P√∫blica</span>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <div className=\"info-item\"><strong>üë§ Creador:</strong> {bibliotecaSeleccionada.creador?.username}</div>\r\n              <div className=\"info-item\"><strong>üìù Descripci√≥n:</strong> {bibliotecaSeleccionada.descripcion || 'Sin descripci√≥n'}</div>\r\n              <div className=\"info-item\"><strong>üìñ Total de libros:</strong> {bibliotecaSeleccionada.libros?.length || 0}</div>\r\n              \r\n              {bibliotecaSeleccionada.libros && bibliotecaSeleccionada.libros.length > 0 && (\r\n                <div className=\"libros-preview\">\r\n                  <h4>üìö Libros en esta biblioteca:</h4>\r\n                  <div className=\"lista-libros-modal\">\r\n                    {bibliotecaSeleccionada.libros.map(libro => (\r\n                      <div \r\n                        key={libro.id} \r\n                        className=\"libro-item-modal\"\r\n                        onClick={() => {\r\n                          cerrarModales();\r\n                          abrirLibro(libro);\r\n                        }}\r\n                        style={{ cursor: 'pointer' }}\r\n                      >\r\n                        <span className=\"libro-icono\">üìñ</span>\r\n                        <span className=\"libro-titulo-modal\">{libro.titulo}</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {!esCreadorDeBiblioteca(bibliotecaSeleccionada) && (\r\n                <button \r\n                  className={`btn-seguir-modal ${estaSiguiendoBiblioteca(bibliotecaSeleccionada.id) ? 'siguiendo' : ''}`}\r\n                  onClick={(e) => seguirBiblioteca(bibliotecaSeleccionada.id, e)}\r\n                >\r\n                  {estaSiguiendoBiblioteca(bibliotecaSeleccionada.id) ? '‚úì Siguiendo' : '‚≠ê Seguir esta biblioteca'}\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* MODAL AGREGAR LIBRO A BIBLIOTECA */}\r\n      {mostrarModalAgregarLibro && libroSeleccionado && (\r\n        <div className=\"modal-overlay\" onClick={cerrarModales}>\r\n          <div className=\"modal\" onClick={e => e.stopPropagation()}>\r\n            <button className=\"btn-cerrar\" onClick={cerrarModales}>‚úï</button>\r\n            <div className=\"modal-header\">\r\n              <h2 className=\"modal-titulo\">Agregar \"{libroSeleccionado.titulo}\"</h2>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              {mensaje && (\r\n                <div className={mensaje.includes('‚úÖ') ? 'mensaje-exito' : 'mensaje-error'}>\r\n                  {mensaje}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"form-group\">\r\n                <label>Selecciona una biblioteca:</label>\r\n                <select \r\n                  value={bibliotecaDestino} \r\n                  onChange={(e) => setBibliotecaDestino(e.target.value)}\r\n                  className=\"select-biblioteca\"\r\n                >\r\n                  <option value=\"\">-- Seleccionar --</option>\r\n                  {misBibliotecas.map(bib => (\r\n                    <option key={bib.id} value={bib.id}>\r\n                      {bib.esPublica ? 'üåç' : 'üîí'} {bib.nombre}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"modal-botones\">\r\n                <button className=\"btn-modal btn-cancelar\" onClick={cerrarModales}>\r\n                  Cancelar\r\n                </button>\r\n                <button \r\n                  className=\"btn-modal btn-confirmar\" \r\n                  onClick={agregarLibroABiblioteca}\r\n                  disabled={cargando}\r\n                >\r\n                  {cargando ? 'Agregando...' : 'Agregar'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* LECTOR DE PDF */}\r\n      {libroAbierto && (\r\n        <LectorLibro \r\n          url={`${API_URL}/api/libros/pdf/${libroAbierto.id}`}\r\n          onClose={cerrarLibro}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ExploradorLibros;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}