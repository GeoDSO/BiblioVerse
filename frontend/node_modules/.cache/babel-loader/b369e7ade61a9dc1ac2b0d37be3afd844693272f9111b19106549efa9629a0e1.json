{"ast":null,"code":"import _objectSpread from\"C:/Users/Geo/Desktop/TFG/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo}from'react';import'./perfilusuario.css';import LectorLibro from'./lectorlibro';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://localhost:8081';const VISTA_TIPOS={MIS_LIBROS:'Mis Libros',MIS_BIBLIOTECAS:'Mis Bibliotecas',SEGUIDOS:'Seguidos'};function PerfilPage(_ref){var _bibliotecaExpandida$,_bibliotecaExpandida$2;let{usuario}=_ref;const[bibliotecas,setBibliotecas]=useState([]);const[bibliotecasSeguidas,setBibliotecasSeguidas]=useState([]);const[bibliotecaExpandida,setBibliotecaExpandida]=useState(null);const[libroAbierto,setLibroAbierto]=useState(null);const[mostrarModalCrear,setMostrarModalCrear]=useState(false);const[formData,setFormData]=useState({nombre:'',descripcion:'',esPublica:false});const[mensaje,setMensaje]=useState('');const[cargando,setCargando]=useState(false);const[vistaActiva,setVistaActiva]=useState(VISTA_TIPOS.MIS_BIBLIOTECAS);useEffect(()=>{if(usuario&&usuario.id){cargarBibliotecas();cargarBibliotecasSeguidas();}},[usuario]);const obtenerColorLibro=libroId=>{const colores=8;return\"color-\".concat(libroId%colores+1);};const cargarBibliotecas=async()=>{if(!usuario||!usuario.id)return;try{const response=await fetch(\"\".concat(API_URL,\"/api/bibliotecas/listar\"));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();if(Array.isArray(data)){setBibliotecas(data);}else{setBibliotecas([]);}}catch(error){console.error('‚ùå Error al cargar bibliotecas:',error);setBibliotecas([]);}};const cargarBibliotecasSeguidas=async()=>{if(!usuario||!usuario.id)return;try{const response=await fetch(\"\".concat(API_URL,\"/api/bibliotecas/listar\"));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();if(Array.isArray(data)){// Filtrar bibliotecas donde el usuario actual est√° en la lista de seguidores\nconst seguidas=data.filter(b=>b.seguidores&&b.seguidores.some(seg=>seg.id===usuario.id)&&b.creador.id!==usuario.id);setBibliotecasSeguidas(seguidas);}}catch(error){console.error('‚ùå Error al cargar bibliotecas seguidas:',error);setBibliotecasSeguidas([]);}};const contenidoFiltrado=useMemo(()=>{if(!usuario||!usuario.id)return{tipo:vistaActiva,contenido:[]};const misBibliotecas=bibliotecas.filter(b=>b.creador&&b.creador.id===usuario.id);switch(vistaActiva){case VISTA_TIPOS.MIS_LIBROS:return{tipo:VISTA_TIPOS.MIS_LIBROS,mensaje:\"Funcionalidad de Mis Libros (requiere listar libros individualmente).\",contenido:[]};case VISTA_TIPOS.MIS_BIBLIOTECAS:return{tipo:VISTA_TIPOS.MIS_BIBLIOTECAS,contenido:misBibliotecas};case VISTA_TIPOS.SEGUIDOS:return{tipo:VISTA_TIPOS.SEGUIDOS,contenido:bibliotecasSeguidas};default:return{tipo:vistaActiva,contenido:[]};}},[bibliotecas,bibliotecasSeguidas,vistaActiva,usuario]);const expandirBiblioteca=biblioteca=>{setBibliotecaExpandida(biblioteca);};const cerrarExpandida=()=>{setBibliotecaExpandida(null);};const abrirLibro=(libro,e)=>{e.stopPropagation();setLibroAbierto(libro);};const cerrarLibro=()=>{setLibroAbierto(null);};const abrirModalCrear=()=>{setMostrarModalCrear(true);setFormData({nombre:'',descripcion:'',esPublica:false});setMensaje('');};const cerrarModalCrear=()=>{setMostrarModalCrear(false);setFormData({nombre:'',descripcion:'',esPublica:false});setMensaje('');};const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));setMensaje('');};const handleVisibilidadChange=esPublica=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{esPublica}));};const crearBiblioteca=async()=>{if(!formData.nombre.trim()){setMensaje('‚ùå El nombre es obligatorio');return;}if(!usuario||!usuario.id){setMensaje('‚ùå Error: El ID del usuario no est√° disponible.');return;}setCargando(true);try{const datosEnviar={nombre:formData.nombre,descripcion:formData.descripcion||\"\",esPublica:formData.esPublica,idUsuario:usuario.id};const response=await fetch(\"\".concat(API_URL,\"/api/bibliotecas/crear\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(datosEnviar)});if(response.ok){setMensaje('‚úÖ ¬°Biblioteca creada exitosamente!');setTimeout(()=>{cerrarModalCrear();cargarBibliotecas();},1500);}else{const error=await response.text();setMensaje(\"\\u274C Error al crear: \".concat(error));}}catch(error){console.error('Error de conexi√≥n o fetch:',error);setMensaje('‚ùå Error de red o conexi√≥n al servidor.');}finally{setCargando(false);}};const eliminarBiblioteca=async id=>{if(!window.confirm('¬øEst√°s seguro de eliminar esta biblioteca? Los libros no se eliminar√°n.')){return;}try{const response=await fetch(\"\".concat(API_URL,\"/api/bibliotecas/eliminar/\").concat(id),{method:'DELETE'});if(response.ok){alert('‚úÖ Biblioteca eliminada');cargarBibliotecas();cerrarExpandida();}else{alert('‚ùå Error al eliminar la biblioteca');}}catch(error){console.error('Error:',error);alert('‚ùå Error de conexi√≥n');}};const eliminarLibroDeBiblioteca=async(idBiblioteca,idLibro,e)=>{e.stopPropagation();if(!window.confirm('¬øQuieres eliminar este libro de la biblioteca?')){return;}try{const response=await fetch(\"\".concat(API_URL,\"/api/bibliotecas/\").concat(idBiblioteca,\"/eliminar-libro/\").concat(idLibro),{method:'DELETE'});if(response.ok){alert('‚úÖ Libro eliminado de la biblioteca');const bibliotecaActualizada=_objectSpread(_objectSpread({},bibliotecaExpandida),{},{libros:bibliotecaExpandida.libros.filter(libro=>libro.id!==idLibro)});setBibliotecaExpandida(bibliotecaActualizada);cargarBibliotecas();}else{alert('‚ùå Error al eliminar el libro');}}catch(error){console.error('Error:',error);alert('‚ùå Error de conexi√≥n');}};const dejarDeSeguirBiblioteca=async(bibliotecaId,e)=>{e.stopPropagation();if(!window.confirm('¬øDejar de seguir esta biblioteca?')){return;}try{const response=await fetch(\"\".concat(API_URL,\"/api/usuarios/\").concat(usuario.id,\"/dejar-de-seguir-biblioteca/\").concat(bibliotecaId),{method:'DELETE'});if(response.ok){alert('‚úÖ Has dejado de seguir esta biblioteca');cargarBibliotecasSeguidas();cerrarExpandida();}else{alert('‚ùå Error al dejar de seguir');}}catch(error){console.error('Error:',error);alert('‚ùå Error de conexi√≥n');}};const handleImageError=(e,libroId)=>{e.target.style.display='none';const placeholder=e.target.nextSibling;if(placeholder){placeholder.classList.add('visible');}};if(!usuario){return/*#__PURE__*/_jsx(\"div\",{className:\"perfil-wrapper\",children:\"No hay informaci\\xF3n de usuario disponible.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"perfil-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"perfil-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"perfil-header\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"titulo\",children:[\"\\uD83D\\uDC64 Perfil de \",/*#__PURE__*/_jsxs(\"span\",{className:\"highlight\",children:[\"@\",usuario.username]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitulo\",children:\"Informaci\\xF3n personal y tus recursos guardados.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"perfil-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"avatar-placeholder\",children:/*#__PURE__*/_jsx(\"span\",{className:\"avatar-inicial\",children:usuario.username?usuario.username[0].toUpperCase():\"U\"})}),/*#__PURE__*/_jsxs(\"h2\",{className:\"nombre-usuario\",children:[\"@\",usuario.username]}),/*#__PURE__*/_jsx(\"p\",{className:\"correo-usuario\",children:usuario.email}),/*#__PURE__*/_jsxs(\"div\",{className:\"perfil-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-numero\",children:contenidoFiltrado.tipo===VISTA_TIPOS.MIS_BIBLIOTECAS?contenidoFiltrado.contenido.length:bibliotecas.filter(b=>b.creador&&b.creador.id===usuario.id).length}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Bibliotecas\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-numero\",children:bibliotecasSeguidas.length}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Siguiendo\"})]})]})]}),/*#__PURE__*/_jsx(\"nav\",{className:\"perfil-filtro-nav\",children:Object.values(VISTA_TIPOS).map(tipo=>/*#__PURE__*/_jsx(\"button\",{className:\"filtro-btn \".concat(vistaActiva===tipo?'activo':''),onClick:()=>setVistaActiva(tipo),children:tipo},tipo))}),/*#__PURE__*/_jsxs(\"section\",{className:\"bibliotecas-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bibliotecas-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"bibliotecas-titulo\",children:vistaActiva===VISTA_TIPOS.MIS_BIBLIOTECAS?'üìö Mis Bibliotecas':vistaActiva===VISTA_TIPOS.MIS_LIBROS?'üìñ Mis Libros':'üë• Bibliotecas que Sigo'}),vistaActiva===VISTA_TIPOS.MIS_BIBLIOTECAS&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-nueva-biblioteca-header\",onClick:abrirModalCrear,children:\"\\u2795 Nueva Biblioteca\"})]}),contenidoFiltrado.tipo===VISTA_TIPOS.MIS_LIBROS?/*#__PURE__*/_jsx(\"div\",{className:\"mensaje-info\",children:contenidoFiltrado.mensaje}):contenidoFiltrado.contenido.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"mensaje-info\",children:vistaActiva===VISTA_TIPOS.MIS_BIBLIOTECAS?'A√∫n no tienes bibliotecas creadas. ¬°Crea tu primera biblioteca!':'No sigues ninguna biblioteca todav√≠a. Explora bibliotecas p√∫blicas para seguirlas.'}):/*#__PURE__*/_jsx(\"div\",{className:\"bibliotecas-container\",children:contenidoFiltrado.contenido.map(biblioteca=>{var _biblioteca$libros;return/*#__PURE__*/_jsxs(\"div\",{className:\"biblioteca-card\",onClick:()=>expandirBiblioteca(biblioteca),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"biblioteca-header-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icono\",children:biblioteca.esPublica?'üåç':'üîí'}),/*#__PURE__*/_jsx(\"h3\",{className:\"biblioteca-nombre\",children:biblioteca.nombre})]}),/*#__PURE__*/_jsx(\"p\",{className:\"biblioteca-descripcion\",children:biblioteca.descripcion||'Sin descripci√≥n'}),/*#__PURE__*/_jsx(\"div\",{className:\"mini-estanteria\",children:biblioteca.libros&&biblioteca.libros.length>0?biblioteca.libros.slice(0,6).map(libro=>/*#__PURE__*/_jsxs(\"div\",{className:\"libro-mini-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(API_URL,\"/api/libros/portada/\").concat(libro.id),alt:libro.titulo,className:\"mini-portada\",onError:e=>handleImageError(e,libro.id)}),/*#__PURE__*/_jsx(\"div\",{className:\"libro-placeholder \".concat(obtenerColorLibro(libro.id)),children:\"\\uD83D\\uDCD6\"})]},libro.id)):/*#__PURE__*/_jsx(\"span\",{className:\"sin-libros-mini\",children:\"Sin libros a\\xFAn\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"biblioteca-footer\",children:[/*#__PURE__*/_jsx(\"span\",{className:biblioteca.esPublica?\"badge-publica\":\"badge-privada\",children:biblioteca.esPublica?'P√∫blica':'Privada'}),/*#__PURE__*/_jsxs(\"span\",{className:\"cantidad\",children:[\"\\uD83D\\uDCD6 \",((_biblioteca$libros=biblioteca.libros)===null||_biblioteca$libros===void 0?void 0:_biblioteca$libros.length)||0]})]})]},biblioteca.id);})})]})]}),mostrarModalCrear&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-crear-biblioteca\",onClick:cerrarModalCrear,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-crear-contenido\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCDA Crear Nueva Biblioteca\"}),mensaje&&/*#__PURE__*/_jsx(\"div\",{className:mensaje.includes('‚úÖ')?'mensaje-exito':'mensaje-error',children:mensaje}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nombre *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nombre\",value:formData.nombre,onChange:handleInputChange,placeholder:\"Mi Biblioteca de...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"descripcion\",value:formData.descripcion,onChange:handleInputChange,placeholder:\"Describe tu biblioteca...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Visibilidad\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"visibilidad-opciones\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"opcion-visibilidad \".concat(!formData.esPublica?'activa':''),onClick:()=>handleVisibilidadChange(false),children:[/*#__PURE__*/_jsx(\"div\",{className:\"icono-opcion\",children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Privada\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Solo t\\xFA puedes verla\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"opcion-visibilidad \".concat(formData.esPublica?'activa':''),onClick:()=>handleVisibilidadChange(true),children:[/*#__PURE__*/_jsx(\"div\",{className:\"icono-opcion\",children:\"\\uD83C\\uDF0D\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"P\\xFAblica\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Visible en el explorador\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-botones\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-modal btn-cancelar\",onClick:cerrarModalCrear,children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-modal btn-crear\",onClick:crearBiblioteca,disabled:cargando,children:cargando?'Creando...':'Crear Biblioteca'})]})]})}),bibliotecaExpandida&&/*#__PURE__*/_jsx(\"div\",{className:\"biblioteca-expandida\",onClick:cerrarExpandida,children:/*#__PURE__*/_jsxs(\"div\",{className:\"biblioteca-expandida-contenido\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"biblioteca-expandida-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(\"span\",{children:bibliotecaExpandida.esPublica?'üåç':'üîí'}),bibliotecaExpandida.nombre]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-cerrar\",onClick:cerrarExpandida,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"biblioteca-expandida-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"biblioteca-expandida-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Descripci\\xF3n:\"}),\" \",bibliotecaExpandida.descripcion||'Sin descripci√≥n']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Creador:\"}),\" @\",(_bibliotecaExpandida$=bibliotecaExpandida.creador)===null||_bibliotecaExpandida$===void 0?void 0:_bibliotecaExpandida$.username]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Visibilidad:\"}),/*#__PURE__*/_jsx(\"span\",{className:bibliotecaExpandida.esPublica?\"badge-publica\":\"badge-privada\",style:{marginLeft:'0.5rem'},children:bibliotecaExpandida.esPublica?'P√∫blica':'Privada'})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total de libros:\"}),\" \",((_bibliotecaExpandida$2=bibliotecaExpandida.libros)===null||_bibliotecaExpandida$2===void 0?void 0:_bibliotecaExpandida$2.length)||0]}),vistaActiva===VISTA_TIPOS.MIS_BIBLIOTECAS&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-eliminar\",onClick:()=>eliminarBiblioteca(bibliotecaExpandida.id),children:\"\\uD83D\\uDDD1\\uFE0F Eliminar Biblioteca\"}),vistaActiva===VISTA_TIPOS.SEGUIDOS&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-dejar-seguir\",onClick:e=>dejarDeSeguirBiblioteca(bibliotecaExpandida.id,e),children:\"\\uD83D\\uDC94 Dejar de Seguir\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"estanteria-grande\",children:bibliotecaExpandida.libros&&bibliotecaExpandida.libros.length>0?bibliotecaExpandida.libros.map(libro=>/*#__PURE__*/_jsxs(\"div\",{className:\"libro-grande\",onClick:e=>abrirLibro(libro,e),children:[vistaActiva===VISTA_TIPOS.MIS_BIBLIOTECAS&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-eliminar-libro\",onClick:e=>eliminarLibroDeBiblioteca(bibliotecaExpandida.id,libro.id,e),title:\"Eliminar de la biblioteca\",children:\"\\xD7\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"libro-grande-portada-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(API_URL,\"/api/libros/portada/\").concat(libro.id),alt:libro.titulo,onError:e=>handleImageError(e,libro.id)}),/*#__PURE__*/_jsx(\"div\",{className:\"libro-placeholder-grande \".concat(obtenerColorLibro(libro.id)),children:\"\\uD83D\\uDCDA\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"libro-grande-titulo\",children:libro.titulo})]},libro.id)):/*#__PURE__*/_jsx(\"div\",{className:\"sin-libros-grande\",children:\"\\uD83D\\uDCDA Esta biblioteca a\\xFAn no tiene libros\"})})]})]})}),libroAbierto&&/*#__PURE__*/_jsx(LectorLibro,{url:\"\".concat(API_URL,\"/api/libros/pdf/\").concat(libroAbierto.id),onClose:cerrarLibro})]});}export default PerfilPage;","map":{"version":3,"names":["React","useState","useEffect","useMemo","LectorLibro","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","VISTA_TIPOS","MIS_LIBROS","MIS_BIBLIOTECAS","SEGUIDOS","PerfilPage","_ref","_bibliotecaExpandida$","_bibliotecaExpandida$2","usuario","bibliotecas","setBibliotecas","bibliotecasSeguidas","setBibliotecasSeguidas","bibliotecaExpandida","setBibliotecaExpandida","libroAbierto","setLibroAbierto","mostrarModalCrear","setMostrarModalCrear","formData","setFormData","nombre","descripcion","esPublica","mensaje","setMensaje","cargando","setCargando","vistaActiva","setVistaActiva","id","cargarBibliotecas","cargarBibliotecasSeguidas","obtenerColorLibro","libroId","colores","concat","response","fetch","ok","Error","status","data","json","Array","isArray","error","console","seguidas","filter","b","seguidores","some","seg","creador","contenidoFiltrado","tipo","contenido","misBibliotecas","expandirBiblioteca","biblioteca","cerrarExpandida","abrirLibro","libro","e","stopPropagation","cerrarLibro","abrirModalCrear","cerrarModalCrear","handleInputChange","name","value","target","prev","_objectSpread","handleVisibilidadChange","crearBiblioteca","trim","datosEnviar","idUsuario","method","headers","body","JSON","stringify","setTimeout","text","eliminarBiblioteca","window","confirm","alert","eliminarLibroDeBiblioteca","idBiblioteca","idLibro","bibliotecaActualizada","libros","dejarDeSeguirBiblioteca","bibliotecaId","handleImageError","style","display","placeholder","nextSibling","classList","add","className","children","username","toUpperCase","email","length","Object","values","map","onClick","_biblioteca$libros","slice","src","alt","titulo","onError","includes","type","onChange","disabled","marginLeft","title","url","onClose"],"sources":["C:/Users/Geo/Desktop/TFG/frontend/src/componentes/perfilUsuario.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport './perfilusuario.css';\r\nimport LectorLibro from './lectorlibro'; \r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8081';\r\n\r\nconst VISTA_TIPOS = {\r\n    MIS_LIBROS: 'Mis Libros',\r\n    MIS_BIBLIOTECAS: 'Mis Bibliotecas',\r\n    SEGUIDOS: 'Seguidos'\r\n};\r\n\r\nfunction PerfilPage({ usuario }) {\r\n    const [bibliotecas, setBibliotecas] = useState([]);\r\n    const [bibliotecasSeguidas, setBibliotecasSeguidas] = useState([]);\r\n    const [bibliotecaExpandida, setBibliotecaExpandida] = useState(null);\r\n    const [libroAbierto, setLibroAbierto] = useState(null);\r\n    const [mostrarModalCrear, setMostrarModalCrear] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        nombre: '',\r\n        descripcion: '',\r\n        esPublica: false\r\n    });\r\n    const [mensaje, setMensaje] = useState('');\r\n    const [cargando, setCargando] = useState(false);\r\n    const [vistaActiva, setVistaActiva] = useState(VISTA_TIPOS.MIS_BIBLIOTECAS);\r\n\r\n    useEffect(() => {\r\n        if (usuario && usuario.id) {\r\n            cargarBibliotecas();\r\n            cargarBibliotecasSeguidas();\r\n        }\r\n    }, [usuario]);\r\n\r\n    const obtenerColorLibro = (libroId) => {\r\n        const colores = 8;\r\n        return `color-${(libroId % colores) + 1}`;\r\n    };\r\n\r\n    const cargarBibliotecas = async () => {\r\n        if (!usuario || !usuario.id) return;\r\n        \r\n        try {\r\n            const response = await fetch(`${API_URL}/api/bibliotecas/listar`);\r\n            \r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n            \r\n            const data = await response.json();\r\n            \r\n            if (Array.isArray(data)) {\r\n                setBibliotecas(data);\r\n            } else {\r\n                setBibliotecas([]);\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.error('‚ùå Error al cargar bibliotecas:', error);\r\n            setBibliotecas([]);\r\n        }\r\n    };\r\n\r\n    const cargarBibliotecasSeguidas = async () => {\r\n        if (!usuario || !usuario.id) return;\r\n        \r\n        try {\r\n            const response = await fetch(`${API_URL}/api/bibliotecas/listar`);\r\n            \r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n            \r\n            const data = await response.json();\r\n            \r\n            if (Array.isArray(data)) {\r\n                // Filtrar bibliotecas donde el usuario actual est√° en la lista de seguidores\r\n                const seguidas = data.filter(b => \r\n                    b.seguidores && b.seguidores.some(seg => seg.id === usuario.id) && b.creador.id !== usuario.id\r\n                );\r\n                setBibliotecasSeguidas(seguidas);\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.error('‚ùå Error al cargar bibliotecas seguidas:', error);\r\n            setBibliotecasSeguidas([]);\r\n        }\r\n    };\r\n    \r\n    const contenidoFiltrado = useMemo(() => {\r\n        if (!usuario || !usuario.id) return { tipo: vistaActiva, contenido: [] };\r\n\r\n        const misBibliotecas = bibliotecas.filter(b => b.creador && b.creador.id === usuario.id);\r\n        \r\n        switch (vistaActiva) {\r\n            case VISTA_TIPOS.MIS_LIBROS:\r\n                return {\r\n                    tipo: VISTA_TIPOS.MIS_LIBROS,\r\n                    mensaje: \"Funcionalidad de Mis Libros (requiere listar libros individualmente).\",\r\n                    contenido: []\r\n                };\r\n            case VISTA_TIPOS.MIS_BIBLIOTECAS:\r\n                return {\r\n                    tipo: VISTA_TIPOS.MIS_BIBLIOTECAS,\r\n                    contenido: misBibliotecas\r\n                };\r\n            case VISTA_TIPOS.SEGUIDOS:\r\n                return {\r\n                    tipo: VISTA_TIPOS.SEGUIDOS,\r\n                    contenido: bibliotecasSeguidas\r\n                };\r\n            default:\r\n                return { tipo: vistaActiva, contenido: [] };\r\n        }\r\n    }, [bibliotecas, bibliotecasSeguidas, vistaActiva, usuario]);\r\n\r\n    const expandirBiblioteca = (biblioteca) => { setBibliotecaExpandida(biblioteca); };\r\n    const cerrarExpandida = () => { setBibliotecaExpandida(null); };\r\n    const abrirLibro = (libro, e) => { e.stopPropagation(); setLibroAbierto(libro); };\r\n    const cerrarLibro = () => { setLibroAbierto(null); };\r\n    \r\n    const abrirModalCrear = () => { setMostrarModalCrear(true); setFormData({ nombre: '', descripcion: '', esPublica: false }); setMensaje(''); };\r\n    const cerrarModalCrear = () => { setMostrarModalCrear(false); setFormData({ nombre: '', descripcion: '', esPublica: false }); setMensaje(''); };\r\n    const handleInputChange = (e) => { const { name, value } = e.target; setFormData(prev => ({ ...prev, [name]: value })); setMensaje(''); };\r\n    const handleVisibilidadChange = (esPublica) => { setFormData(prev => ({ ...prev, esPublica })); };\r\n    \r\n    const crearBiblioteca = async () => { \r\n        if (!formData.nombre.trim()) {\r\n            setMensaje('‚ùå El nombre es obligatorio');\r\n            return;\r\n        }\r\n\r\n        if (!usuario || !usuario.id) {\r\n            setMensaje('‚ùå Error: El ID del usuario no est√° disponible.');\r\n            return;\r\n        }\r\n\r\n        setCargando(true);\r\n        try {\r\n            const datosEnviar = {\r\n                nombre: formData.nombre,\r\n                descripcion: formData.descripcion || \"\",\r\n                esPublica: formData.esPublica,\r\n                idUsuario: usuario.id\r\n            };\r\n\r\n            const response = await fetch(`${API_URL}/api/bibliotecas/crear`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(datosEnviar)\r\n            });\r\n\r\n            if (response.ok) {\r\n                setMensaje('‚úÖ ¬°Biblioteca creada exitosamente!');\r\n                setTimeout(() => {\r\n                    cerrarModalCrear();\r\n                    cargarBibliotecas();\r\n                }, 1500);\r\n            } else {\r\n                const error = await response.text();\r\n                setMensaje(`‚ùå Error al crear: ${error}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error de conexi√≥n o fetch:', error);\r\n            setMensaje('‚ùå Error de red o conexi√≥n al servidor.');\r\n        } finally {\r\n            setCargando(false);\r\n        }\r\n    };\r\n    \r\n    const eliminarBiblioteca = async (id) => {\r\n        if (!window.confirm('¬øEst√°s seguro de eliminar esta biblioteca? Los libros no se eliminar√°n.')) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/api/bibliotecas/eliminar/${id}`, {\r\n                method: 'DELETE'\r\n            });\r\n\r\n            if (response.ok) {\r\n                alert('‚úÖ Biblioteca eliminada');\r\n                cargarBibliotecas();\r\n                cerrarExpandida();\r\n            } else {\r\n                alert('‚ùå Error al eliminar la biblioteca');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            alert('‚ùå Error de conexi√≥n');\r\n        }\r\n    };\r\n\r\n    const eliminarLibroDeBiblioteca = async (idBiblioteca, idLibro, e) => {\r\n        e.stopPropagation();\r\n        \r\n        if (!window.confirm('¬øQuieres eliminar este libro de la biblioteca?')) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(\r\n                `${API_URL}/api/bibliotecas/${idBiblioteca}/eliminar-libro/${idLibro}`,\r\n                { method: 'DELETE' }\r\n            );\r\n\r\n            if (response.ok) {\r\n                alert('‚úÖ Libro eliminado de la biblioteca');\r\n                \r\n                const bibliotecaActualizada = {\r\n                    ...bibliotecaExpandida,\r\n                    libros: bibliotecaExpandida.libros.filter(libro => libro.id !== idLibro)\r\n                };\r\n                setBibliotecaExpandida(bibliotecaActualizada);\r\n                \r\n                cargarBibliotecas();\r\n            } else {\r\n                alert('‚ùå Error al eliminar el libro');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            alert('‚ùå Error de conexi√≥n');\r\n        }\r\n    };\r\n\r\n    const dejarDeSeguirBiblioteca = async (bibliotecaId, e) => {\r\n        e.stopPropagation();\r\n        \r\n        if (!window.confirm('¬øDejar de seguir esta biblioteca?')) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(\r\n                `${API_URL}/api/usuarios/${usuario.id}/dejar-de-seguir-biblioteca/${bibliotecaId}`,\r\n                { method: 'DELETE' }\r\n            );\r\n\r\n            if (response.ok) {\r\n                alert('‚úÖ Has dejado de seguir esta biblioteca');\r\n                cargarBibliotecasSeguidas();\r\n                cerrarExpandida();\r\n            } else {\r\n                alert('‚ùå Error al dejar de seguir');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            alert('‚ùå Error de conexi√≥n');\r\n        }\r\n    };\r\n\r\n    const handleImageError = (e, libroId) => {\r\n        e.target.style.display = 'none';\r\n        const placeholder = e.target.nextSibling;\r\n        if (placeholder) {\r\n            placeholder.classList.add('visible');\r\n        }\r\n    };\r\n\r\n    if (!usuario) {\r\n        return <div className=\"perfil-wrapper\">No hay informaci√≥n de usuario disponible.</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"perfil-wrapper\">\r\n            <div className=\"perfil-container\">\r\n                \r\n                <header className=\"perfil-header\">\r\n                    <h1 className=\"titulo\">üë§ Perfil de <span className=\"highlight\">@{usuario.username}</span></h1>\r\n                    <p className=\"subtitulo\">Informaci√≥n personal y tus recursos guardados.</p>\r\n                </header>\r\n\r\n                <div className=\"perfil-card\">\r\n                    <div className=\"avatar-placeholder\">\r\n                        <span className=\"avatar-inicial\">\r\n                            {usuario.username ? usuario.username[0].toUpperCase() : \"U\"}\r\n                        </span>\r\n                    </div>\r\n                    <h2 className=\"nombre-usuario\">@{usuario.username}</h2>\r\n                    <p className=\"correo-usuario\">{usuario.email}</p>\r\n                    \r\n                    <div className=\"perfil-stats\">\r\n                        <div className=\"stat-item\">\r\n                            <span className=\"stat-numero\">{contenidoFiltrado.tipo === VISTA_TIPOS.MIS_BIBLIOTECAS ? contenidoFiltrado.contenido.length : bibliotecas.filter(b => b.creador && b.creador.id === usuario.id).length}</span>\r\n                            <span className=\"stat-label\">Bibliotecas</span>\r\n                        </div>\r\n                        <div className=\"stat-item\">\r\n                            <span className=\"stat-numero\">{bibliotecasSeguidas.length}</span>\r\n                            <span className=\"stat-label\">Siguiendo</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                <nav className=\"perfil-filtro-nav\">\r\n                    {Object.values(VISTA_TIPOS).map(tipo => (\r\n                        <button\r\n                            key={tipo}\r\n                            className={`filtro-btn ${vistaActiva === tipo ? 'activo' : ''}`}\r\n                            onClick={() => setVistaActiva(tipo)}\r\n                        >\r\n                            {tipo}\r\n                        </button>\r\n                    ))}\r\n                </nav>\r\n\r\n                <section className=\"bibliotecas-section\">\r\n                    \r\n                    <div className=\"bibliotecas-header\">\r\n                        <h2 className=\"bibliotecas-titulo\">\r\n                            {vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS ? 'üìö Mis Bibliotecas' : \r\n                             vistaActiva === VISTA_TIPOS.MIS_LIBROS ? 'üìñ Mis Libros' :\r\n                             'üë• Bibliotecas que Sigo'}\r\n                        </h2>\r\n                        \r\n                        {vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS && (\r\n                            <button \r\n                                className=\"btn-nueva-biblioteca-header\" \r\n                                onClick={abrirModalCrear}\r\n                            >\r\n                                ‚ûï Nueva Biblioteca\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    {contenidoFiltrado.tipo === VISTA_TIPOS.MIS_LIBROS ? (\r\n                        <div className=\"mensaje-info\">\r\n                            {contenidoFiltrado.mensaje}\r\n                        </div>\r\n                    ) : contenidoFiltrado.contenido.length === 0 ? (\r\n                        <div className=\"mensaje-info\">\r\n                            {vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS ? \r\n                                'A√∫n no tienes bibliotecas creadas. ¬°Crea tu primera biblioteca!' : \r\n                                'No sigues ninguna biblioteca todav√≠a. Explora bibliotecas p√∫blicas para seguirlas.'}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"bibliotecas-container\">\r\n                            {contenidoFiltrado.contenido.map((biblioteca) => (\r\n                                <div \r\n                                    key={biblioteca.id} \r\n                                    className=\"biblioteca-card\"\r\n                                    onClick={() => expandirBiblioteca(biblioteca)}\r\n                                >\r\n                                    <div className=\"biblioteca-header-card\">\r\n                                        <span className=\"icono\">{biblioteca.esPublica ? 'üåç' : 'üîí'}</span>\r\n                                        <h3 className=\"biblioteca-nombre\">{biblioteca.nombre}</h3>\r\n                                    </div>\r\n\r\n                                    <p className=\"biblioteca-descripcion\">\r\n                                        {biblioteca.descripcion|| 'Sin descripci√≥n'}\r\n                                    </p>\r\n\r\n                                    <div className=\"mini-estanteria\">\r\n                                        {biblioteca.libros && biblioteca.libros.length > 0 ? (\r\n                                            biblioteca.libros.slice(0, 6).map((libro) => (\r\n                                                <div key={libro.id} className=\"libro-mini-wrapper\">\r\n                                                    <img \r\n                                                        src={`${API_URL}/api/libros/portada/${libro.id}`}\r\n                                                        alt={libro.titulo}\r\n                                                        className=\"mini-portada\"\r\n                                                        onError={(e) => handleImageError(e, libro.id)}\r\n                                                    />\r\n                                                    <div className={`libro-placeholder ${obtenerColorLibro(libro.id)}`}>\r\n                                                        üìñ\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))\r\n                                        ) : (\r\n                                            <span className=\"sin-libros-mini\">Sin libros a√∫n</span>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    <div className=\"biblioteca-footer\">\r\n                                        <span className={biblioteca.esPublica ? \"badge-publica\" : \"badge-privada\"}>\r\n                                            {biblioteca.esPublica ? 'P√∫blica' : 'Privada'}\r\n                                        </span>\r\n\r\n                                        <span className=\"cantidad\">\r\n                                            üìñ {biblioteca.libros?.length || 0}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </section>\r\n            \r\n            </div>\r\n\r\n            {/* MODAL CREAR BIBLIOTECA */}\r\n            {mostrarModalCrear && (\r\n                <div className=\"modal-crear-biblioteca\" onClick={cerrarModalCrear}>\r\n                    <div className=\"modal-crear-contenido\" onClick={(e) => e.stopPropagation()}>\r\n                        <h2>üìö Crear Nueva Biblioteca</h2>\r\n                        {mensaje && (<div className={mensaje.includes('‚úÖ') ? 'mensaje-exito' : 'mensaje-error'}>{mensaje}</div>)}\r\n                        <div className=\"form-group\"><label>Nombre *</label><input type=\"text\" name=\"nombre\" value={formData.nombre} onChange={handleInputChange} placeholder=\"Mi Biblioteca de...\"/></div>\r\n                        <div className=\"form-group\"><label>Descripci√≥n</label><textarea name=\"descripcion\" value={formData.descripcion} onChange={handleInputChange} placeholder=\"Describe tu biblioteca...\"/></div>\r\n                        <div className=\"form-group\">\r\n                            <label>Visibilidad</label>\r\n                            <div className=\"visibilidad-opciones\">\r\n                                <div className={`opcion-visibilidad ${!formData.esPublica ? 'activa' : ''}`} onClick={() => handleVisibilidadChange(false)}>\r\n                                    <div className=\"icono-opcion\">üîí</div><h3>Privada</h3><p>Solo t√∫ puedes verla</p>\r\n                                </div>\r\n                                <div className={`opcion-visibilidad ${formData.esPublica ? 'activa' : ''}`} onClick={() => handleVisibilidadChange(true)}>\r\n                                    <div className=\"icono-opcion\">üåç</div><h3>P√∫blica</h3><p>Visible en el explorador</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"modal-botones\">\r\n                            <button className=\"btn-modal btn-cancelar\" onClick={cerrarModalCrear}>Cancelar</button>\r\n                            <button className=\"btn-modal btn-crear\" onClick={crearBiblioteca} disabled={cargando}>{cargando ? 'Creando...' : 'Crear Biblioteca'}</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* VISTA EXPANDIDA */}\r\n            {bibliotecaExpandida && (\r\n                <div className=\"biblioteca-expandida\" onClick={cerrarExpandida}>\r\n                    <div className=\"biblioteca-expandida-contenido\" onClick={(e) => e.stopPropagation()}>\r\n                        <div className=\"biblioteca-expandida-header\">\r\n                            <h2>\r\n                                <span>{bibliotecaExpandida.esPublica ? 'üåç' : 'üîí'}</span>\r\n                                {bibliotecaExpandida.nombre}\r\n                            </h2>\r\n                            <button className=\"btn-cerrar\" onClick={cerrarExpandida}>√ó</button>\r\n                        </div>\r\n\r\n                        <div className=\"biblioteca-expandida-body\">\r\n                            <div className=\"biblioteca-expandida-info\">\r\n                                <p><strong>Descripci√≥n:</strong> {bibliotecaExpandida.descripcion || 'Sin descripci√≥n'}</p>\r\n                                <p><strong>Creador:</strong> @{bibliotecaExpandida.creador?.username}</p>\r\n                                <p>\r\n                                    <strong>Visibilidad:</strong> \r\n                                    <span className={bibliotecaExpandida.esPublica ? \"badge-publica\" : \"badge-privada\"} style={{marginLeft: '0.5rem'}}>\r\n                                        {bibliotecaExpandida.esPublica ? 'P√∫blica' : 'Privada'}\r\n                                    </span>\r\n                                </p>\r\n                                <p><strong>Total de libros:</strong> {bibliotecaExpandida.libros?.length || 0}</p>\r\n                                \r\n                                {vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS && (\r\n                                    <button \r\n                                        className=\"btn-eliminar\"\r\n                                        onClick={() => eliminarBiblioteca(bibliotecaExpandida.id)}\r\n                                    >\r\n                                        üóëÔ∏è Eliminar Biblioteca\r\n                                    </button>\r\n                                )}\r\n\r\n                                {vistaActiva === VISTA_TIPOS.SEGUIDOS && (\r\n                                    <button \r\n                                        className=\"btn-dejar-seguir\"\r\n                                        onClick={(e) => dejarDeSeguirBiblioteca(bibliotecaExpandida.id, e)}\r\n                                    >\r\n                                        üíî Dejar de Seguir\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"estanteria-grande\">\r\n                                {bibliotecaExpandida.libros && bibliotecaExpandida.libros.length > 0 ? (\r\n                                    bibliotecaExpandida.libros.map((libro) => (\r\n                                        <div \r\n                                            key={libro.id} \r\n                                            className=\"libro-grande\"\r\n                                            onClick={(e) => abrirLibro(libro, e)}\r\n                                        >\r\n                                            {vistaActiva === VISTA_TIPOS.MIS_BIBLIOTECAS && (\r\n                                                <button \r\n                                                    className=\"btn-eliminar-libro\"\r\n                                                    onClick={(e) => eliminarLibroDeBiblioteca(bibliotecaExpandida.id, libro.id, e)}\r\n                                                    title=\"Eliminar de la biblioteca\"\r\n                                                >\r\n                                                    √ó\r\n                                                </button>\r\n                                            )}\r\n                                            <div className=\"libro-grande-portada-wrapper\">\r\n                                                <img \r\n                                                    src={`${API_URL}/api/libros/portada/${libro.id}`}\r\n                                                    alt={libro.titulo}\r\n                                                    onError={(e) => handleImageError(e, libro.id)}\r\n                                                />\r\n                                                <div className={`libro-placeholder-grande ${obtenerColorLibro(libro.id)}`}>\r\n                                                    üìö\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"libro-grande-titulo\">{libro.titulo}</div>\r\n                                        </div>\r\n                                    ))\r\n                                ) : (\r\n                                    <div className=\"sin-libros-grande\">\r\n                                        üìö Esta biblioteca a√∫n no tiene libros\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* LECTOR DE PDF */}\r\n            {libroAbierto && (\r\n                <LectorLibro \r\n                    url={`${API_URL}/api/libros/pdf/${libroAbierto.id}`}\r\n                    onClose={cerrarLibro}\r\n                />\r\n            )}\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PerfilPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}