{"ast":null,"code":"// ======================= IMPORTS =======================\n// React y useState para manejar estados\nimport React,{useState}from'react';// Componentes principales de la aplicaciÃ³n\nimport Nav from'./componentes/nav.js';import HomePage from'./componentes/homepage.jsx';import LoginRegister from'./componentes/loginregister.jsx';import AnadirLibro from'./componentes/aÃ±adir-libro.jsx';import ExplorarPage from'./componentes/explorador.jsx';import Bibliotecas from'./componentes/bibliotecas.jsx';import PerfilPage from'./componentes/perfilUsuario.jsx';import'./app.css';// =======================================================\n//   COMPONENTE PRINCIPAL DE LA APLICACIÃ“N\n// =======================================================\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isSignUp,setIsSignUp]=useState(false);// vistaActual controla quÃ© pantalla se muestra (login/home/etc)\nconst[vistaActual,setVistaActual]=useState('login');// usuario contiene informaciÃ³n del usuario logueado\nconst[usuario,setUsuario]=useState(null);// -------------------------------------------------------\n//   Cerrar sesiÃ³n\n// -------------------------------------------------------\nconst handleLogout=()=>{setUsuario(null);setVistaActual('login');};// -------------------------------------------------------\n//   Cambiar de pantalla manualmente\n// -------------------------------------------------------\nconst handleNavigate=vista=>{setVistaActual(vista);if(vista==='register'){setIsSignUp(true);}else if(vista==='login'){setIsSignUp(false);}else{setIsSignUp(false);}};// -------------------------------------------------------\n//   LOGIN DE USUARIO\n// -------------------------------------------------------\nconst handleLogin=async(email,password)=>{try{const API_URL=process.env.REACT_APP_API_URL;const response=await fetch(\"\".concat(API_URL,\"/api/auth/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});const data=await response.json();console.log(\"ðŸ“¥ Respuesta del login:\",data);// â† AÃ‘ADE ESTO\nconsole.log(\"ðŸ‘¤ Usuario guardado:\",data.usuario);// â† AÃ‘ADE ESTO\nif(response.ok){// Guardamos usuario y pasamos a la pantalla HOME\nsetUsuario(data.usuario);setVistaActual('home');alert('Login exitoso');}else{alert('Error en el login');}}catch(error){console.error('Error en la solicitud:',error);alert('Error de conexiÃ³n con el servidor');}};// -------------------------------------------------------\n//   REGISTRO DE USUARIO\n// -------------------------------------------------------\nconst handleRegister=async(email,username,password)=>{try{const API_URL=process.env.REACT_APP_API_URL;const response=await fetch(\"\".concat(API_URL,\"/api/auth/register\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,username,password})});if(response.ok){alert('Â¡Registro exitoso! Ahora puedes iniciar sesiÃ³n');}else{alert('Error al registrarse');}}catch(error){alert('Error al conectar con el servidor');}};// =======================================================\n//   RENDER DE LA APLICACIÃ“N\n// =======================================================\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App \".concat(isSignUp?\"night\":\"day\"),children:[/*#__PURE__*/_jsx(Nav,{usuario:usuario,onLogout:handleLogout,onNavigate:handleNavigate}),/*#__PURE__*/_jsxs(\"main\",{className:\"main \".concat(vistaActual==='login'||vistaActual==='register'?'modo-login':''),children:[(vistaActual==='login'||vistaActual==='register')&&/*#__PURE__*/_jsx(LoginRegister,{onLogin:handleLogin,onRegister:handleRegister,setIsSignUp:setIsSignUp,isSignUpGlobal:isSignUp}),vistaActual==='home'&&usuario&&/*#__PURE__*/_jsx(HomePage,{usuario:usuario}),vistaActual==='bibliotecas'&&usuario&&/*#__PURE__*/_jsx(Bibliotecas,{usuario:usuario}),vistaActual==='aÃ±adir-libro'&&usuario&&/*#__PURE__*/_jsx(AnadirLibro,{usuario:usuario}),vistaActual==='explorador'&&usuario&&/*#__PURE__*/_jsx(ExplorarPage,{usuario:usuario}),vistaActual==='perfilpage'&&usuario&&/*#__PURE__*/_jsx(PerfilPage,{usuario:usuario})// <<< AÃ‘ADE ESTO\n]})]});}export default App;","map":{"version":3,"names":["React","useState","Nav","HomePage","LoginRegister","AnadirLibro","ExplorarPage","Bibliotecas","PerfilPage","jsx","_jsx","jsxs","_jsxs","App","isSignUp","setIsSignUp","vistaActual","setVistaActual","usuario","setUsuario","handleLogout","handleNavigate","vista","handleLogin","email","password","API_URL","process","env","REACT_APP_API_URL","response","fetch","concat","method","headers","body","JSON","stringify","data","json","console","log","ok","alert","error","handleRegister","username","className","children","onLogout","onNavigate","onLogin","onRegister","isSignUpGlobal"],"sources":["C:/Users/Geo/Desktop/TFG/frontend/src/app.js"],"sourcesContent":["// ======================= IMPORTS =======================\r\n// React y useState para manejar estados\r\nimport React, { useState } from 'react';\r\n\r\n// Componentes principales de la aplicaciÃ³n\r\nimport Nav from './componentes/nav.js';\r\nimport HomePage from './componentes/homepage.jsx';\r\nimport LoginRegister from './componentes/loginregister.jsx';\r\nimport AnadirLibro from './componentes/aÃ±adir-libro.jsx';\r\nimport ExplorarPage from './componentes/explorador.jsx';\r\nimport Bibliotecas from './componentes/bibliotecas.jsx';\r\nimport PerfilPage from './componentes/perfilUsuario.jsx';\r\n\r\nimport './app.css';\r\n\r\n// =======================================================\r\n//   COMPONENTE PRINCIPAL DE LA APLICACIÃ“N\r\n// =======================================================\r\n\r\nfunction App() {\r\n\r\n    const [isSignUp, setIsSignUp] = useState(false);\r\n  // vistaActual controla quÃ© pantalla se muestra (login/home/etc)\r\n  const [vistaActual, setVistaActual] = useState('login');\r\n\r\n  // usuario contiene informaciÃ³n del usuario logueado\r\n  const [usuario, setUsuario] = useState(null);\r\n\r\n\r\n  \r\n  // -------------------------------------------------------\r\n  //   Cerrar sesiÃ³n\r\n  // -------------------------------------------------------\r\n  const handleLogout = () => {\r\n    setUsuario(null);\r\n    setVistaActual('login');\r\n  };\r\n\r\n  // -------------------------------------------------------\r\n  //   Cambiar de pantalla manualmente\r\n  // -------------------------------------------------------\r\n  const handleNavigate = (vista) => {\r\n    setVistaActual(vista);\r\n    if(vista === 'register'){\r\n      setIsSignUp(true);\r\n    }else if (vista === 'login'){\r\n      setIsSignUp(false);\r\n    }else{\r\n      setIsSignUp(false)\r\n    }\r\n  };\r\n\r\n  // -------------------------------------------------------\r\n  //   LOGIN DE USUARIO\r\n  // -------------------------------------------------------\r\n  const handleLogin = async (email, password) => {\r\n    try {\r\n      const API_URL = process.env.REACT_APP_API_URL;\r\n\r\n      const response = await fetch(`${API_URL}/api/auth/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      console.log(\"ðŸ“¥ Respuesta del login:\", data);  // â† AÃ‘ADE ESTO\r\n      console.log(\"ðŸ‘¤ Usuario guardado:\", data.usuario);  // â† AÃ‘ADE ESTO\r\n\r\n      if (response.ok) {\r\n        // Guardamos usuario y pasamos a la pantalla HOME\r\n        setUsuario(data.usuario);\r\n        setVistaActual('home');\r\n        alert('Login exitoso');\r\n      } else {\r\n        alert('Error en el login');\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error en la solicitud:', error);\r\n      alert('Error de conexiÃ³n con el servidor');\r\n    }\r\n  };\r\n\r\n  // -------------------------------------------------------\r\n  //   REGISTRO DE USUARIO\r\n  // -------------------------------------------------------\r\n  const handleRegister = async (email, username, password) => {\r\n    try {\r\n      const API_URL = process.env.REACT_APP_API_URL;\r\n\r\n      const response = await fetch(`${API_URL}/api/auth/register`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, username, password }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        alert('Â¡Registro exitoso! Ahora puedes iniciar sesiÃ³n');\r\n      } else {\r\n        alert('Error al registrarse');\r\n      }\r\n\r\n    } catch (error) {\r\n      alert('Error al conectar con el servidor');\r\n    }\r\n  };\r\n\r\n  // =======================================================\r\n  //   RENDER DE LA APLICACIÃ“N\r\n  // =======================================================\r\n  return (\r\n    <div className={`App ${isSignUp ? \"night\" : \"day\"}`}>\r\n\r\n      <Nav\r\n        usuario={usuario}\r\n        onLogout={handleLogout}\r\n        onNavigate={handleNavigate}\r\n      />\r\n\r\n      {/* Contenedor principal */}\r\n      <main className={`main ${vistaActual === 'login'|| vistaActual === 'register' ? 'modo-login' : ''}`}>\r\n\r\n        {/* Pantalla LOGIN / REGISTRO */}\r\n        {(vistaActual === 'login' || vistaActual === 'register') && (\r\n          <LoginRegister\r\n            onLogin={handleLogin}\r\n            onRegister={handleRegister}\r\n            setIsSignUp={setIsSignUp}\r\n            isSignUpGlobal={isSignUp}\r\n          />\r\n        )}\r\n\r\n        {/* Pantalla HOME */}\r\n        {vistaActual === 'home' && usuario && (\r\n          <HomePage usuario={usuario} />\r\n        )}\r\n\r\n        {/* Lista de Bibliotecas */}\r\n        {vistaActual === 'bibliotecas' && usuario && (\r\n          <Bibliotecas usuario={usuario} />\r\n    )}\r\n\r\n        {/* AÃ±adir libro */}\r\n        {vistaActual === 'aÃ±adir-libro' && usuario && (\r\n          <AnadirLibro usuario={usuario} />\r\n        )}\r\n\r\n        {vistaActual === 'explorador' && usuario && (\r\n  <ExplorarPage usuario={usuario} />\r\n)}\r\n\r\n    {vistaActual === 'perfilpage' && usuario && ( \r\n    Â  Â  Â  Â  Â  <PerfilPage usuario={usuario} /> // <<< AÃ‘ADE ESTO\r\n    Â  Â  Â  Â  )}\r\n\r\n      </main>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"AAAA;AACA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAEvC;AACA,MAAO,CAAAC,GAAG,KAAM,sBAAsB,CACtC,MAAO,CAAAC,QAAQ,KAAM,4BAA4B,CACjD,MAAO,CAAAC,aAAa,KAAM,iCAAiC,CAC3D,MAAO,CAAAC,WAAW,KAAM,gCAAgC,CACxD,MAAO,CAAAC,YAAY,KAAM,8BAA8B,CACvD,MAAO,CAAAC,WAAW,KAAM,+BAA+B,CACvD,MAAO,CAAAC,UAAU,KAAM,iCAAiC,CAExD,MAAO,WAAW,CAElB;AACA;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEA,QAAS,CAAAC,GAAGA,CAAA,CAAG,CAEX,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CACjD;AACA,KAAM,CAACe,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAAC,OAAO,CAAC,CAEvD;AACA,KAAM,CAACiB,OAAO,CAAEC,UAAU,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAI5C;AACA;AACA;AACA,KAAM,CAAAmB,YAAY,CAAGA,CAAA,GAAM,CACzBD,UAAU,CAAC,IAAI,CAAC,CAChBF,cAAc,CAAC,OAAO,CAAC,CACzB,CAAC,CAED;AACA;AACA;AACA,KAAM,CAAAI,cAAc,CAAIC,KAAK,EAAK,CAChCL,cAAc,CAACK,KAAK,CAAC,CACrB,GAAGA,KAAK,GAAK,UAAU,CAAC,CACtBP,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,IAAK,IAAIO,KAAK,GAAK,OAAO,CAAC,CAC1BP,WAAW,CAAC,KAAK,CAAC,CACpB,CAAC,IAAI,CACHA,WAAW,CAAC,KAAK,CAAC,CACpB,CACF,CAAC,CAED;AACA;AACA;AACA,KAAM,CAAAQ,WAAW,CAAG,KAAAA,CAAOC,KAAK,CAAEC,QAAQ,GAAK,CAC7C,GAAI,CACF,KAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAE7C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIN,OAAO,oBAAmB,CACxDO,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEb,KAAK,CAAEC,QAAS,CAAC,CAC1C,CAAC,CAAC,CAEF,KAAM,CAAAa,IAAI,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAElCC,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEH,IAAI,CAAC,CAAG;AAC/CE,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEH,IAAI,CAACpB,OAAO,CAAC,CAAG;AAEpD,GAAIY,QAAQ,CAACY,EAAE,CAAE,CACf;AACAvB,UAAU,CAACmB,IAAI,CAACpB,OAAO,CAAC,CACxBD,cAAc,CAAC,MAAM,CAAC,CACtB0B,KAAK,CAAC,eAAe,CAAC,CACxB,CAAC,IAAM,CACLA,KAAK,CAAC,mBAAmB,CAAC,CAC5B,CAEF,CAAE,MAAOC,KAAK,CAAE,CACdJ,OAAO,CAACI,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CD,KAAK,CAAC,mCAAmC,CAAC,CAC5C,CACF,CAAC,CAED;AACA;AACA;AACA,KAAM,CAAAE,cAAc,CAAG,KAAAA,CAAOrB,KAAK,CAAEsB,QAAQ,CAAErB,QAAQ,GAAK,CAC1D,GAAI,CACF,KAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAE7C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIN,OAAO,uBAAsB,CAC3DO,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEb,KAAK,CAAEsB,QAAQ,CAAErB,QAAS,CAAC,CACpD,CAAC,CAAC,CAEF,GAAIK,QAAQ,CAACY,EAAE,CAAE,CACfC,KAAK,CAAC,gDAAgD,CAAC,CACzD,CAAC,IAAM,CACLA,KAAK,CAAC,sBAAsB,CAAC,CAC/B,CAEF,CAAE,MAAOC,KAAK,CAAE,CACdD,KAAK,CAAC,mCAAmC,CAAC,CAC5C,CACF,CAAC,CAED;AACA;AACA;AACA,mBACE/B,KAAA,QAAKmC,SAAS,QAAAf,MAAA,CAASlB,QAAQ,CAAG,OAAO,CAAG,KAAK,CAAG,CAAAkC,QAAA,eAElDtC,IAAA,CAACR,GAAG,EACFgB,OAAO,CAAEA,OAAQ,CACjB+B,QAAQ,CAAE7B,YAAa,CACvB8B,UAAU,CAAE7B,cAAe,CAC5B,CAAC,cAGFT,KAAA,SAAMmC,SAAS,SAAAf,MAAA,CAAUhB,WAAW,GAAK,OAAO,EAAGA,WAAW,GAAK,UAAU,CAAG,YAAY,CAAG,EAAE,CAAG,CAAAgC,QAAA,EAGjG,CAAChC,WAAW,GAAK,OAAO,EAAIA,WAAW,GAAK,UAAU,gBACrDN,IAAA,CAACN,aAAa,EACZ+C,OAAO,CAAE5B,WAAY,CACrB6B,UAAU,CAAEP,cAAe,CAC3B9B,WAAW,CAAEA,WAAY,CACzBsC,cAAc,CAAEvC,QAAS,CAC1B,CACF,CAGAE,WAAW,GAAK,MAAM,EAAIE,OAAO,eAChCR,IAAA,CAACP,QAAQ,EAACe,OAAO,CAAEA,OAAQ,CAAE,CAC9B,CAGAF,WAAW,GAAK,aAAa,EAAIE,OAAO,eACvCR,IAAA,CAACH,WAAW,EAACW,OAAO,CAAEA,OAAQ,CAAE,CACrC,CAGIF,WAAW,GAAK,cAAc,EAAIE,OAAO,eACxCR,IAAA,CAACL,WAAW,EAACa,OAAO,CAAEA,OAAQ,CAAE,CACjC,CAEAF,WAAW,GAAK,YAAY,EAAIE,OAAO,eAC9CR,IAAA,CAACJ,YAAY,EAACY,OAAO,CAAEA,OAAQ,CAAE,CAClC,CAEIF,WAAW,GAAK,YAAY,EAAIE,OAAO,eAC9BR,IAAA,CAACF,UAAU,EAACU,OAAO,CAAEA,OAAQ,CAAE,CAAE;AAClC,EAED,CAAC,EAEJ,CAAC,CAEV,CAEA,cAAe,CAAAL,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}